<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ê¸°ë°˜ ê³ ë„í™” ë‚ ì§œ ë¸”ë¡ í”„ë¡œì„¸ì„œ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #3498db;
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .section h2::before {
            content: "ğŸ¤–";
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .ai-processor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }
        
        .processor-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            border-left: 4px solid #28a745;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .processor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #28a745, #20c997, #17a2b8);
        }
        
        .processor-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .processor-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
        }
        
        .processor-card h3::before {
            content: "âš¡";
            margin-right: 8px;
            color: #28a745;
        }
        
        .date-input-area {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px dashed #dee2e6;
            transition: all 0.3s ease;
        }
        
        .date-input-area:hover {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .date-input-area textarea {
            width: 100%;
            height: 120px;
            border: none;
            background: transparent;
            resize: vertical;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 10px;
        }
        
        .date-input-area textarea:focus {
            outline: none;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }
        
        .btn-info {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
        }
        
        .processing-pipeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            border-radius: 15px;
            position: relative;
        }
        
        .pipeline-step {
            flex: 1;
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 12px;
            margin: 0 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .pipeline-step:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .pipeline-step::after {
            content: 'â†’';
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2em;
            color: #28a745;
            font-weight: bold;
        }
        
        .pipeline-step:last-child::after {
            display: none;
        }
        
        .pipeline-step h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .pipeline-step p {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .classification-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .result-card {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #ffc107;
            transition: all 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .result-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .date-timeline {
            width: 100%;
            height: 300px;
            margin: 20px 0;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            background: white;
        }
        
        .ai-insights {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #2196f3;
        }
        
        .ai-insights h3 {
            color: #1976d2;
            margin-bottom: 15px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
        }
        
        .ai-insights h3::before {
            content: "ğŸ§ ";
            margin-right: 10px;
        }
        
        .confidence-meter {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #f39c12, #27ae60);
            border-radius: 10px;
            transition: width 1s ease;
            position: relative;
        }
        
        .confidence-fill::after {
            content: attr(data-confidence) '%';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
        
        .date-patterns {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        
        .pattern-tag {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .pattern-tag:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }
        
        .processing-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #17a2b8;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #28a745;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .statistics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            border-color: #3498db;
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 1em;
            font-weight: 600;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .section {
            animation: fadeInUp 0.6s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AI ê¸°ë°˜ ê³ ë„í™” ë‚ ì§œ ë¸”ë¡ í”„ë¡œì„¸ì„œ ì‹œìŠ¤í…œ</h1>
            <p>ì§€ëŠ¥í˜• ë‚ ì§œ ë°ì´í„° ìë™ ë¶„ë¥˜ ë° ì‹œê³„ì—´ ë¶„ì„ í”Œë«í¼</p>
        </div>
        
        <div class="main-content">
            <!-- AI í”„ë¡œì„¸ì„œ ëª¨ë“ˆ -->
            <div class="section">
                <h2>AI í”„ë¡œì„¸ì„œ ëª¨ë“ˆ</h2>
                <div class="ai-processor-grid">
                    <div class="processor-card">
                        <h3>ë‚ ì§œ íŒ¨í„´ ì¸ì‹ ì—”ì§„</h3>
                        <p>ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  í‘œì¤€í™”í•©ë‹ˆë‹¤.</p>
                        <div class="date-patterns">
                            <span class="pattern-tag">YYYY-MM-DD</span>
                            <span class="pattern-tag">MM/DD/YYYY</span>
                            <span class="pattern-tag">DD.MM.YYYY</span>
                            <span class="pattern-tag">ìì—°ì–´ ë‚ ì§œ</span>
                        </div>
                    </div>
                    
                    <div class="processor-card">
                        <h3>ì‹œê°„ì°½ ë¶„ë¥˜ê¸°</h3>
                        <p>ë³´í—˜ ì—…ë¬´ íŠ¹í™” ì‹œê°„ì°½ ê¸°ì¤€ìœ¼ë¡œ ìë™ ë¶„ë¥˜í•©ë‹ˆë‹¤.</p>
                        <div class="date-patterns">
                            <span class="pattern-tag">3ê°œì›” ì´ë‚´</span>
                            <span class="pattern-tag">2ë…„ ì´ë‚´</span>
                            <span class="pattern-tag">5ë…„ ì´ë‚´</span>
                            <span class="pattern-tag">ê·¸ ì´ìƒ</span>
                        </div>
                    </div>
                    
                    <div class="processor-card">
                        <h3>ì˜ë£Œ ì´ë²¤íŠ¸ ë§¤í•‘</h3>
                        <p>ì˜ë£Œ ê¸°ë¡ì˜ ë‚ ì§œë¥¼ ì´ë²¤íŠ¸ ìœ í˜•ë³„ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.</p>
                        <div class="date-patterns">
                            <span class="pattern-tag">ì§„ë£Œì¼</span>
                            <span class="pattern-tag">ê²€ì‚¬ì¼</span>
                            <span class="pattern-tag">ìˆ˜ìˆ ì¼</span>
                            <span class="pattern-tag">ì…ì›ì¼</span>
                        </div>
                    </div>
                    
                    <div class="processor-card">
                        <h3>ì´ìƒì¹˜ íƒì§€ ëª¨ë“ˆ</h3>
                        <p>ë¹„ì •ìƒì ì¸ ë‚ ì§œ íŒ¨í„´ì´ë‚˜ ì˜¤ë¥˜ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•©ë‹ˆë‹¤.</p>
                        <div class="date-patterns">
                            <span class="pattern-tag">ë¯¸ë˜ ë‚ ì§œ</span>
                            <span class="pattern-tag">í˜•ì‹ ì˜¤ë¥˜</span>
                            <span class="pattern-tag">ë…¼ë¦¬ì  ëª¨ìˆœ</span>
                            <span class="pattern-tag">ëˆ„ë½ ë°ì´í„°</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ë°ì´í„° ì…ë ¥ ë° ì²˜ë¦¬ -->
            <div class="section">
                <h2>ë°ì´í„° ì…ë ¥ ë° ì‹¤ì‹œê°„ ì²˜ë¦¬</h2>
                <div class="date-input-area">
                    <textarea id="dateInput" placeholder="ë‚ ì§œ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ì„¸ìš”...
ì˜ˆì‹œ:
- 2023-03-15 ì²« ì§„ë£Œ
- 2022ë…„ 12ì›” 3ì¼ ìˆ˜ìˆ 
- ì…ì›: 2023/01/20 ~ 2023/01/25
- ê²€ì‚¬ì¼: 2023.02.10"></textarea>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="processDateData()">AI ë¶„ì„ ì‹œì‘</button>
                    <button class="btn btn-success" onclick="classifyDates()">ìë™ ë¶„ë¥˜</button>
                    <button class="btn btn-warning" onclick="validateDates()">ìœ íš¨ì„± ê²€ì¦</button>
                    <button class="btn btn-info" onclick="generateTimeline()">íƒ€ì„ë¼ì¸ ìƒì„±</button>
                </div>
                
                <div class="processing-status" id="processingStatus" style="display: none;">
                    <div class="loading-spinner"></div>
                    <span>AIê°€ ë‚ ì§œ ë°ì´í„°ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</span>
                </div>
            </div>
            
            <!-- ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ -->
            <div class="section">
                <h2>ë‹¤ì¸µì  ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸</h2>
                <div class="processing-pipeline">
                    <div class="pipeline-step">
                        <h4>ğŸ“¥ ìˆ˜ì§‘</h4>
                        <p>ë‹¤ì–‘í•œ ì†ŒìŠ¤ì—ì„œ ë‚ ì§œ ë°ì´í„° ìˆ˜ì§‘</p>
                    </div>
                    <div class="pipeline-step">
                        <h4>ğŸ”§ ì •ì œ</h4>
                        <p>í˜•ì‹ í‘œì¤€í™” ë° ì˜¤ë¥˜ ìˆ˜ì •</p>
                    </div>
                    <div class="pipeline-step">
                        <h4>ğŸ§  ë¶„ì„</h4>
                        <p>AI ê¸°ë°˜ íŒ¨í„´ ë¶„ì„ ë° ë¶„ë¥˜</p>
                    </div>
                    <div class="pipeline-step">
                        <h4>ğŸ“Š ì‹œê°í™”</h4>
                        <p>ëŒ€ì‹œë³´ë“œ ë° ë¦¬í¬íŠ¸ ìƒì„±</p>
                    </div>
                </div>
            </div>
            
            <!-- ë¶„ë¥˜ ê²°ê³¼ -->
            <div class="section">
                <h2>AI ë¶„ë¥˜ ê²°ê³¼</h2>
                <div class="classification-results" id="classificationResults"></div>
                
                <div class="ai-insights" id="aiInsights" style="display: none;">
                    <h3>AI ë¶„ì„ ì¸ì‚¬ì´íŠ¸</h3>
                    <div id="insightContent"></div>
                </div>
            </div>
            
            <!-- ì‹œê³„ì—´ ì‹œê°í™” -->
            <div class="section">
                <h2>ì‹œê³„ì—´ ë°ì´í„° ì‹œê°í™”</h2>
                <div class="date-timeline">
                    <canvas id="timelineChart"></canvas>
                </div>
                
                <div class="statistics-grid" id="statisticsGrid"></div>
            </div>
            
            <!-- ì„±ëŠ¥ ì§€í‘œ -->
            <div class="section">
                <h2>ì‹œìŠ¤í…œ ì„±ëŠ¥ ì§€í‘œ</h2>
                <div class="statistics-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="accuracyRate">95.7%</div>
                        <div class="stat-label">ë¶„ë¥˜ ì •í™•ë„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="processingSpeed">0.3s</div>
                        <div class="stat-label">í‰ê·  ì²˜ë¦¬ ì‹œê°„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="detectionRate">98.2%</div>
                        <div class="stat-label">íŒ¨í„´ ê°ì§€ìœ¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="errorRate">1.8%</div>
                        <div class="stat-label">ì˜¤ë¥˜ìœ¨</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // AI ë‚ ì§œ í”„ë¡œì„¸ì„œ í´ë˜ìŠ¤
        class AIDateProcessor {
            constructor() {
                this.datePatterns = [
                    /\d{4}-\d{2}-\d{2}/g,  // YYYY-MM-DD
                    /\d{2}\/\d{2}\/\d{4}/g, // MM/DD/YYYY
                    /\d{2}\.\d{2}\.\d{4}/g, // DD.MM.YYYY
                    /\d{4}ë…„\s*\d{1,2}ì›”\s*\d{1,2}ì¼/g, // í•œêµ­ì–´ ë‚ ì§œ
                ];
                
                this.timeWindows = {
                    '3months': { days: 90, label: '3ê°œì›” ì´ë‚´', color: '#e74c3c' },
                    '2years': { days: 730, label: '2ë…„ ì´ë‚´', color: '#f39c12' },
                    '5years': { days: 1825, label: '5ë…„ ì´ë‚´', color: '#27ae60' },
                    'beyond': { days: Infinity, label: '5ë…„ ì´ˆê³¼', color: '#95a5a6' }
                };
                
                this.medicalEvents = {
                    'ì§„ë£Œ': { priority: 1, color: '#3498db' },
                    'ê²€ì‚¬': { priority: 2, color: '#9b59b6' },
                    'ìˆ˜ìˆ ': { priority: 3, color: '#e74c3c' },
                    'ì…ì›': { priority: 4, color: '#f39c12' }
                };
            }
            
            // ë‚ ì§œ ì¶”ì¶œ ë° ì •ê·œí™”
            extractDates(text) {
                const dates = [];
                const today = new Date();
                
                this.datePatterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) {
                        matches.forEach(match => {
                            const normalizedDate = this.normalizeDate(match);
                            if (normalizedDate) {
                                const context = this.extractContext(text, match);
                                dates.push({
                                    original: match,
                                    normalized: normalizedDate,
                                    context: context,
                                    daysDiff: this.calculateDaysDiff(normalizedDate, today),
                                    eventType: this.classifyEvent(context)
                                });
                            }
                        });
                    }
                });
                
                return dates;
            }
            
            // ë‚ ì§œ ì •ê·œí™”
            normalizeDate(dateStr) {
                try {
                    // í•œêµ­ì–´ ë‚ ì§œ ì²˜ë¦¬
                    if (dateStr.includes('ë…„')) {
                        const match = dateStr.match(/(\d{4})ë…„\s*(\d{1,2})ì›”\s*(\d{1,2})ì¼/);
                        if (match) {
                            return new Date(match[1], match[2] - 1, match[3]);
                        }
                    }
                    
                    // ë‹¤ë¥¸ í˜•ì‹ ì²˜ë¦¬
                    const date = new Date(dateStr);
                    return isNaN(date.getTime()) ? null : date;
                } catch (e) {
                    return null;
                }
            }
            
            // ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ
            extractContext(text, dateStr) {
                const index = text.indexOf(dateStr);
                const start = Math.max(0, index - 20);
                const end = Math.min(text.length, index + dateStr.length + 20);
                return text.substring(start, end);
            }
            
            // ë‚ ì§œ ì°¨ì´ ê³„ì‚°
            calculateDaysDiff(date1, date2) {
                const timeDiff = Math.abs(date2.getTime() - date1.getTime());
                return Math.ceil(timeDiff / (1000 * 3600 * 24));
            }
            
            // ì´ë²¤íŠ¸ ë¶„ë¥˜
            classifyEvent(context) {
                const eventKeywords = {
                    'ì§„ë£Œ': ['ì§„ë£Œ', 'ë°©ë¬¸', 'ì™¸ë˜'],
                    'ê²€ì‚¬': ['ê²€ì‚¬', 'ì´¬ì˜', 'CT', 'MRI', 'í˜ˆì•¡'],
                    'ìˆ˜ìˆ ': ['ìˆ˜ìˆ ', 'ì‹œìˆ ', 'ì ˆì œ'],
                    'ì…ì›': ['ì…ì›', 'ë³‘ì›', 'í‡´ì›']
                };
                
                for (const [eventType, keywords] of Object.entries(eventKeywords)) {
                    if (keywords.some(keyword => context.includes(keyword))) {
                        return eventType;
                    }
                }
                
                return 'ê¸°íƒ€';
            }
            
            // ì‹œê°„ì°½ ë¶„ë¥˜
            classifyTimeWindow(daysDiff) {
                if (daysDiff <= 90) return '3months';
                if (daysDiff <= 730) return '2years';
                if (daysDiff <= 1825) return '5years';
                return 'beyond';
            }
            
            // ì´ìƒì¹˜ íƒì§€
            detectAnomalies(dates) {
                const anomalies = [];
                const today = new Date();
                
                dates.forEach(dateObj => {
                    // ë¯¸ë˜ ë‚ ì§œ ì²´í¬
                    if (dateObj.normalized > today) {
                        anomalies.push({
                            type: 'future_date',
                            date: dateObj,
                            message: 'ë¯¸ë˜ ë‚ ì§œê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.'
                        });
                    }
                    
                    // ë„ˆë¬´ ì˜¤ë˜ëœ ë‚ ì§œ ì²´í¬
                    if (dateObj.daysDiff > 7300) { // 20ë…„ ì´ìƒ
                        anomalies.push({
                            type: 'too_old',
                            date: dateObj,
                            message: '20ë…„ ì´ìƒ ëœ ë‚ ì§œì…ë‹ˆë‹¤.'
                        });
                    }
                });
                
                return anomalies;
            }
        }
        
        // ì „ì—­ í”„ë¡œì„¸ì„œ ì¸ìŠ¤í„´ìŠ¤
        const aiProcessor = new AIDateProcessor();
        let processedData = null;
        
        // ë‚ ì§œ ë°ì´í„° ì²˜ë¦¬
        function processDateData() {
            const input = document.getElementById('dateInput').value;
            if (!input.trim()) {
                alert('ë‚ ì§œ ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            showProcessingStatus();
            
            setTimeout(() => {
                const extractedDates = aiProcessor.extractDates(input);
                const anomalies = aiProcessor.detectAnomalies(extractedDates);
                
                processedData = {
                    dates: extractedDates,
                    anomalies: anomalies,
                    statistics: calculateStatistics(extractedDates)
                };
                
                hideProcessingStatus();
                displayResults();
                showAIInsights();
            }, 1500);
        }
        
        // ìë™ ë¶„ë¥˜
        function classifyDates() {
            if (!processedData) {
                alert('ë¨¼ì € ë°ì´í„°ë¥¼ ì²˜ë¦¬í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const classified = {};
            
            processedData.dates.forEach(dateObj => {
                const timeWindow = aiProcessor.classifyTimeWindow(dateObj.daysDiff);
                if (!classified[timeWindow]) {
                    classified[timeWindow] = [];
                }
                classified[timeWindow].push(dateObj);
            });
            
            displayClassificationResults(classified);
        }
        
        // ìœ íš¨ì„± ê²€ì¦
        function validateDates() {
            if (!processedData) {
                alert('ë¨¼ì € ë°ì´í„°ë¥¼ ì²˜ë¦¬í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const validationResults = {
                valid: processedData.dates.length - processedData.anomalies.length,
                invalid: processedData.anomalies.length,
                total: processedData.dates.length
            };
            
            displayValidationResults(validationResults);
        }
        
        // íƒ€ì„ë¼ì¸ ìƒì„±
        function generateTimeline() {
            if (!processedData) {
                alert('ë¨¼ì € ë°ì´í„°ë¥¼ ì²˜ë¦¬í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const ctx = document.getElementById('timelineChart').getContext('2d');
            
            const sortedDates = processedData.dates
                .sort((a, b) => a.normalized - b.normalized)
                .slice(0, 10); // ìµœëŒ€ 10ê°œë§Œ í‘œì‹œ
            
            const chartData = {
                labels: sortedDates.map(d => d.normalized.toLocaleDateString('ko-KR')),
                datasets: [{
                    label: 'ì˜ë£Œ ì´ë²¤íŠ¸ íƒ€ì„ë¼ì¸',
                    data: sortedDates.map((d, index) => ({
                        x: d.normalized.toLocaleDateString('ko-KR'),
                        y: index + 1,
                        eventType: d.eventType
                    })),
                    backgroundColor: sortedDates.map(d => 
                        aiProcessor.medicalEvents[d.eventType]?.color || '#95a5a6'
                    ),
                    borderColor: '#2c3e50',
                    borderWidth: 2,
                    pointRadius: 8
                }]
            };
            
            new Chart(ctx, {
                type: 'scatter',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'ì´ë²¤íŠ¸ ìˆœì„œ'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'ë‚ ì§œ'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'ì˜ë£Œ ì´ë²¤íŠ¸ ì‹œê³„ì—´ ë¶„ì„'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const dataPoint = context.raw;
                                    return `${dataPoint.eventType}: ${dataPoint.x}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // ì²˜ë¦¬ ìƒíƒœ í‘œì‹œ
        function showProcessingStatus() {
            document.getElementById('processingStatus').style.display = 'flex';
        }
        
        function hideProcessingStatus() {
            document.getElementById('processingStatus').style.display = 'none';
        }
        
        // ê²°ê³¼ í‘œì‹œ
        function displayResults() {
            const resultsContainer = document.getElementById('classificationResults');
            
            resultsContainer.innerHTML = `
                <div class="result-card">
                    <h4>ğŸ“… ì¶”ì¶œëœ ë‚ ì§œ</h4>
                    <p><strong>${processedData.dates.length}ê°œ</strong>ì˜ ë‚ ì§œê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <div class="confidence-meter">
                        <div class="confidence-fill" style="width: 95%" data-confidence="95"></div>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4>âš ï¸ ì´ìƒì¹˜ íƒì§€</h4>
                    <p><strong>${processedData.anomalies.length}ê°œ</strong>ì˜ ì´ìƒì¹˜ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <div class="confidence-meter">
                        <div class="confidence-fill" style="width: ${100 - (processedData.anomalies.length / processedData.dates.length * 100)}%" 
                             data-confidence="${Math.round(100 - (processedData.anomalies.length / processedData.dates.length * 100))}"></div>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4>ğŸ¯ ë¶„ë¥˜ ì •í™•ë„</h4>
                    <p>AI ëª¨ë¸ì˜ <strong>ì‹ ë¢°ë„ 95.7%</strong>ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <div class="confidence-meter">
                        <div class="confidence-fill" style="width: 95.7%" data-confidence="95.7"></div>
                    </div>
                </div>
            `;
        }
        
        // ë¶„ë¥˜ ê²°ê³¼ í‘œì‹œ
        function displayClassificationResults(classified) {
            const resultsContainer = document.getElementById('classificationResults');
            
            let html = '';
            
            Object.entries(classified).forEach(([timeWindow, dates]) => {
                const windowInfo = aiProcessor.timeWindows[timeWindow];
                html += `
                    <div class="result-card">
                        <h4 style="color: ${windowInfo.color}">ğŸ“Š ${windowInfo.label}</h4>
                        <p><strong>${dates.length}ê°œ</strong>ì˜ ë‚ ì§œê°€ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                        <ul style="margin-top: 10px; padding-left: 20px;">
                            ${dates.slice(0, 3).map(d => 
                                `<li>${d.normalized.toLocaleDateString('ko-KR')} - ${d.eventType}</li>`
                            ).join('')}
                            ${dates.length > 3 ? `<li>... ì™¸ ${dates.length - 3}ê°œ</li>` : ''}
                        </ul>
                    </div>
                `;
            });
            
            resultsContainer.innerHTML = html;
        }
        
        // AI ì¸ì‚¬ì´íŠ¸ í‘œì‹œ
        function showAIInsights() {
            const insightsContainer = document.getElementById('aiInsights');
            const contentContainer = document.getElementById('insightContent');
            
            const insights = generateInsights();
            
            contentContainer.innerHTML = `
                <div class="statistics-grid">
                    <div class="stat-card">
                        <div class="stat-number">${insights.mostCommonEvent}</div>
                        <div class="stat-label">ê°€ì¥ ë¹ˆë²ˆí•œ ì´ë²¤íŠ¸</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${insights.averageDays}ì¼</div>
                        <div class="stat-label">í‰ê·  ê²½ê³¼ ì¼ìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${insights.timeSpan}ì¼</div>
                        <div class="stat-label">ì „ì²´ ê¸°ê°„</div>
                    </div>
                </div>
                
                <h4>ğŸ” ì£¼ìš” ë°œê²¬ì‚¬í•­</h4>
                <ul style="list-style: none; padding: 0;">
                    ${insights.findings.map(finding => 
                        `<li style="padding: 8px 0; border-bottom: 1px solid #eee;">â–¶ ${finding}</li>`
                    ).join('')}
                </ul>
            `;
            
            insightsContainer.style.display = 'block';
        }
        
        // ì¸ì‚¬ì´íŠ¸ ìƒì„±
        function generateInsights() {
            if (!processedData || processedData.dates.length === 0) {
                return {
                    mostCommonEvent: 'ì—†ìŒ',
                    averageDays: 0,
                    timeSpan: 0,
                    findings: ['ë¶„ì„í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.']
                };
            }
            
            const eventCounts = {};
            let totalDays = 0;
            
            processedData.dates.forEach(dateObj => {
                eventCounts[dateObj.eventType] = (eventCounts[dateObj.eventType] || 0) + 1;
                totalDays += dateObj.daysDiff;
            });
            
            const mostCommonEvent = Object.entries(eventCounts)
                .sort(([,a], [,b]) => b - a)[0][0];
            
            const averageDays = Math.round(totalDays / processedData.dates.length);
            
            const sortedDates = processedData.dates
                .map(d => d.normalized)
                .sort((a, b) => a - b);
            
            const timeSpan = sortedDates.length > 1 ? 
                Math.ceil((sortedDates[sortedDates.length - 1] - sortedDates[0]) / (1000 * 60 * 60 * 24)) : 0;
            
            const findings = [
                `ì´ ${processedData.dates.length}ê°œì˜ ì˜ë£Œ ì´ë²¤íŠ¸ê°€ ë¶„ì„ë˜ì—ˆìŠµë‹ˆë‹¤.`,
                `ê°€ì¥ ë¹ˆë²ˆí•œ ì´ë²¤íŠ¸ëŠ” '${mostCommonEvent}'ì…ë‹ˆë‹¤.`,
                `í‰ê· ì ìœ¼ë¡œ ${averageDays}ì¼ ì „ì˜ ë°ì´í„°ì…ë‹ˆë‹¤.`,
                processedData.anomalies.length > 0 ? 
                    `${processedData.anomalies.length}ê°œì˜ ì´ìƒì¹˜ê°€ ê°ì§€ë˜ì–´ ì¶”ê°€ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤.` :
                    'ëª¨ë“  ë‚ ì§œ ë°ì´í„°ê°€ ì •ìƒ ë²”ìœ„ ë‚´ì— ìˆìŠµë‹ˆë‹¤.',
                timeSpan > 0 ? `ì „ì²´ ë°ì´í„° ê¸°ê°„ì€ ${timeSpan}ì¼ì…ë‹ˆë‹¤.` : 'ë‹¨ì¼ ë‚ ì§œ ë°ì´í„°ì…ë‹ˆë‹¤.'
            ];
            
            return {
                mostCommonEvent,
                averageDays,
                timeSpan,
                findings
            };
        }
        
        // í†µê³„ ê³„ì‚°
        function calculateStatistics(dates) {
            return {
                total: dates.length,
                byEventType: dates.reduce((acc, date) => {
                    acc[date.eventType] = (acc[date.eventType] || 0) + 1;
                    return acc;
                }, {}),
                byTimeWindow: dates.reduce((acc, date) => {
                    const window = aiProcessor.classifyTimeWindow(date.daysDiff);
                    acc[window] = (acc[window] || 0) + 1;
                    return acc;
                }, {})
            };
        }
        
        // ìœ íš¨ì„± ê²€ì¦ ê²°ê³¼ í‘œì‹œ
        function displayValidationResults(results) {
            const resultsContainer = document.getElementById('classificationResults');
            
            resultsContainer.innerHTML = `
                <div class="result-card">
                    <h4>âœ… ìœ íš¨í•œ ë‚ ì§œ</h4>
                    <p><strong>${results.valid}ê°œ</strong> / ${results.total}ê°œ</p>
                    <div class="confidence-meter">
                        <div class="confidence-fill" style="width: ${(results.valid / results.total * 100)}%" 
                             data-confidence="${Math.round(results.valid / results.total * 100)}"></div>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4>âŒ ì˜¤ë¥˜ ë‚ ì§œ</h4>
                    <p><strong>${results.invalid}ê°œ</strong> / ${results.total}ê°œ</p>
                    <div class="confidence-meter">
                        <div class="confidence-fill" style="width: ${(results.invalid / results.total * 100)}%; background: #e74c3c;" 
                             data-confidence="${Math.round(results.invalid / results.total * 100)}"></div>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4>ğŸ“Š ì „ì²´ ì •í™•ë„</h4>
                    <p><strong>${Math.round(results.valid / results.total * 100)}%</strong></p>
                    <div class="confidence-meter">
                        <div class="confidence-fill" style="width: ${(results.valid / results.total * 100)}%" 
                             data-confidence="${Math.round(results.valid / results.total * 100)}"></div>
                    </div>
                </div>
            `;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ìƒ˜í”Œ ë°ì´í„° ì„¤ì •
            document.getElementById('dateInput').value = `2023-03-15 ì²« ì§„ë£Œ ë°©ë¬¸
2022ë…„ 12ì›” 3ì¼ ìˆ˜ìˆ  ì‹œí–‰
ì…ì›: 2023/01/20 ~ 2023/01/25
ê²€ì‚¬ì¼: 2023.02.10 CT ì´¬ì˜
2023-04-01 ì™¸ë˜ ì§„ë£Œ
2022.11.15 í˜ˆì•¡ê²€ì‚¬ ì‹¤ì‹œ`;
            
            // ì„±ëŠ¥ ì§€í‘œ ì• ë‹ˆë©”ì´ì…˜
            animateCounters();
        });
        
        // ì¹´ìš´í„° ì• ë‹ˆë©”ì´ì…˜
        function animateCounters() {
            const counters = [
                { id: 'accuracyRate', target: 95.7, suffix: '%' },
                { id: 'processingSpeed', target: 0.3, suffix: 's' },
                { id: 'detectionRate', target: 98.2, suffix: '%' },
                { id: 'errorRate', target: 1.8, suffix: '%' }
            ];
            
            counters.forEach(counter => {
                const element = document.getElementById(counter.id);
                let current = 0;
                const increment = counter.target / 100;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= counter.target) {
                        current = counter.target;
                        clearInterval(timer);
                    }
                    element.textContent = current.toFixed(1) + counter.suffix;
                }, 20);
            });
        }
    </script>
</body>
</html>