<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>LLM 포지션·역할·기능·프롬프트 개요</title>
<style>
:root{--deep:#0b1f3a;--c1:#14355f;--c2:#215e9b;--acc:#18a0fb;--txt:#e6eef7;--mut:#a8b6c6}
html,body{background:var(--deep);color:var(--txt);margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR",Arial,sans-serif}
.wrap{max-width:1200px;margin:0 auto;padding:28px}
.hdr{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:12px;margin-bottom:18px}
.title{font-size:24px;font-weight:700}
.date{font-size:13px;color:#8ec9f0}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.card{background:linear-gradient(180deg,#102a4a,var(--c1));border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.4);padding:14px}
.h2{font-size:18px;font-weight:600;margin-bottom:8px}
.mono{background:rgba(255,255,255,.06);border-radius:8px;padding:10px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;white-space:pre-wrap}
.pill{display:inline-block;padding:3px 8px;border-radius:999px;background:rgba(24,160,251,.18);border:1px solid rgba(24,160,251,.35);font-size:12px}
.list{display:grid;gap:6px}
.kv{display:flex;gap:8px;align-items:center}
.k{color:#a8b6c6;font-size:12px;min-width:120px}
.v{font-size:14px}
a{color:#8ec9f0;text-decoration:none}
</style>
</head>
<body>
<div class="wrap">
  <div class="hdr">
    <div class="title">LLM 포지션·역할·기능·프롬프트</div>
    <div class="date">작성일: 2026-01-01</div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="h2">파이프라인 포지션</div>
      <div class="list">
        <div class="kv"><div class="k">전처리 AI</div><div class="v">GPT-4o Mini, 연속 세션 1단계</div></div>
        <div class="kv"><div class="k">룰엔진/코어</div><div class="v">구조화 이벤트 생성 및 스코어링</div></div>
        <div class="kv"><div class="k">보고서 AI</div><div class="v">GPT-4o Mini, 연속 세션 2단계</div></div>
        <div class="kv"><div class="k">검증</div><div class="v">Baseline(caseN_report.txt)과 날짜·내용 일치율 비교</div></div>
      </div>
    </div>
    <div class="card">
      <div class="h2">역할·기능</div>
      <div class="list">
        <div class="kv"><div class="k">역할</div><div class="v">손해사정 보고서 전문가</div></div>
        <div class="kv"><div class="k">기능</div><div class="v">구조화 데이터+원문 OCR 컨텍스트 기반 보고서 생성</div></div>
        <div class="kv"><div class="k">출력</div><div class="v">마크다운 보고서, 타임라인, 핵심 근거 포함</div></div>
        <div class="kv"><div class="k">모델</div><div class="v">gpt-4o-mini</div></div>
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:16px">
    <div class="h2">전처리 프롬프트(연속 세션 1단계)</div>
    <div class="pill">system</div>
    <div class="mono">의료 문서 전처리 전문가 (연속 세션 모드)
역할: OCR 텍스트를 구조화하고 다음 단계에서 보고서 생성 시 원본 정보를 참조할 수 있도록 준비한다.
원칙: 정보 보존, 컨텍스트 준비, 품질 보장, 연속성 유지</div>
    <div class="pill" style="margin-top:8px">user</div>
    <div class="mono">환자 정보:
{JSON(patientInfo)}

OCR 추출 텍스트:
{OCR_TEXT}

출력: 구조화된 JSON과 contextNotes를 포함해 다음 단계에서 보고서 생성 시 원본을 참조할 수 있도록 준비한다.</div>
  </div>

  <div class="card" style="margin-top:16px">
    <div class="h2">보고서 생성 프롬프트(연속 세션 2단계)</div>
    <div class="pill">system</div>
    <div class="mono">손해사정 보고서 전문가. 일관된 형식의 고품질 보고서를 생성한다.</div>
    <div class="pill" style="margin-top:8px">user</div>
    <div class="mono">구조화 데이터:
{STRUCTURED_EVENTS}

전처리 응답:
{PREPROCESS_RESPONSE}

요구사항:
1) 마크다운 형식
2) 피보험자 기본 정보 포함
3) 병력 시간순 정리
4) 가입일 기준 3개월/5년 이내 이벤트 표시
5) 보험 심사 핵심 정보 강조
구조:
- 제목 및 기본 정보
- 요약 통계
- 상세 병력 테이블
- 특이사항 및 주의점</div>
  </div>

  <div class="card" style="margin-top:16px">
    <div class="h2">관련 파일</div>
    <div class="list">
      <div class="kv"><div class="k">LLM 검증 스크립트</div><div class="v"><a href="file:///C:/VNEXSUS_12-07/scripts/realtime-ocr-llm-and-compare.ts">realtime-ocr-llm-and-compare.ts</a></div></div>
      <div class="kv"><div class="k">파이프라인 어댑터</div><div class="v"><a href="file:///C:/VNEXSUS_12-07/src/modules/medical-events/service/pipelineAdapter.ts">pipelineAdapter.ts</a></div></div>
      <div class="kv"><div class="k">날짜 바인딩</div><div class="v"><a href="file:///C:/VNEXSUS_12-07/src/modules/medical-events/service/dateBindingV3.ts">dateBindingV3.ts</a></div></div>
      <div class="kv"><div class="k">태그 유의어</div><div class="v"><a href="file:///C:/VNEXSUS_12-07/src/shared/constants/tagSynonyms.ts">tagSynonyms.ts</a></div></div>
      <div class="kv"><div class="k">리포트 생성기</div><div class="v"><a href="file:///C:/VNEXSUS_12-07/backend/services/tenItemReportGenerator.js">tenItemReportGenerator.js</a></div></div>
    </div>
  </div>
</div>
</body>
</html>
