<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VNEXSUS Hybrid Architecture Deep Dive</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
        }

        h2 {
            color: var(--secondary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-top: 40px;
        }

        h3 {
            color: var(--primary-color);
            margin-top: 25px;
        }

        .architecture-diagram {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin: 30px 0;
            overflow-x: auto;
        }

        .module-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            border-left: 5px solid var(--secondary-color);
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .llm-highlight {
            border-left-color: var(--accent-color);
            background-color: #fff5f5;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .step-number {
            background: var(--secondary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        code {
            background: #eee;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            color: #c7254e;
        }

        .mermaid {
            text-align: center;
        }
    </style>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</head>

<body>
    <div class="container">
        <header>
            <h1>VNEXSUS Hybrid Architecture & LLM Integration</h1>
            <p>ê·œì¹™ ê¸°ë°˜ì˜ ì •ë°€í•¨ê³¼ LLMì˜ ì¶”ë¡  ëŠ¥ë ¥ì„ ê²°í•©í•œ í•˜ì´ë¸Œë¦¬ë“œ ì˜ë£Œ ì‹¬ì‚¬ ì‹œìŠ¤í…œ</p>
        </header>

        <section>
            <h2>1. ì•„í‚¤í…ì²˜ ê°œìš” (System Architecture)</h2>
            <p>VNEXSUSëŠ” <strong>"Fact Extraction (ì‚¬ì‹¤ ì¶”ì¶œ)"</strong>ê³¼ <strong>"Judgment (íŒë‹¨)"</strong>, ê·¸ë¦¬ê³ 
                <strong>"Narrative (ì„œìˆ )"</strong>ì˜ 3ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. LLMì€ ë§ˆì§€ë§‰ ë‹¨ê³„ì¸ 'ì„œìˆ 'ê³¼ ë³µì¡í•œ ë¬¸ë§¥ í•´ì„ì— ì§‘ì¤‘ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì–´
                í™˜ê°(Hallucination)ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.</p>

            <div class="architecture-diagram">
                <div class="mermaid">
                    graph TD
                    Input[ì˜ë£Œ ê¸°ë¡ (PDF/Image)] --> OCR[OCR & Text Extraction]
                    OCR --> Phase1[Phase 1: Fact Extraction]

                    subgraph "Core Engine Pipeline"
                    Phase1 -- "Regex/HybridNER" --> Facts[êµ¬ì¡°í™”ëœ ì‚¬ì‹¤ ë°ì´í„°]
                    Facts --> Phase2[Phase 2: 3D Vector Evaluation]
                    Phase2 -- "Severity/Time/Certainty" --> Vector[3D ë²¡í„° & ë¦¬ìŠ¤í¬ íŒì •]

                    Vector --> Phase3[Phase 3: Writer Agent (LLM)]
                    Facts --> Phase3

                    Phase3 -- "Prompting" --> LLM[OpenAI GPT-4o-mini]
                    LLM --> Report[ìµœì¢… ì‹¬ì‚¬ ë³´ê³ ì„œ]
                    end
                </div>
            </div>
        </section>

        <section>
            <h2>2. ì£¼ìš” ëª¨ë“ˆ ë° LLM í™œìš© (Modules & LLM Usage)</h2>

            <div class="module-card">
                <h3>Phase 1: Fact Extraction (ì‚¬ì‹¤ ì¶”ì¶œ)</h3>
                <p><strong>ì—­í• :</strong> ë¹„ì •í˜• í…ìŠ¤íŠ¸ì—ì„œ ë‚ ì§œ, ì§„ë‹¨ëª…, ë³‘ì›ëª… ë“± í•µì‹¬ ì—”í‹°í‹°ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.</p>
                <p><strong>ê¸°ìˆ :</strong> <code>Regex</code> (ì •ê·œì‹), <code>HybridNER</code> (ê·œì¹™ ê¸°ë°˜ ê°œì²´ëª… ì¸ì‹)</p>
                <p><strong>LLM í™œìš©:</strong> ì—†ìŒ (ì •í™•ì„± ë³´ì¥ì„ ìœ„í•´ ê·œì¹™ ê¸°ë°˜ ì²˜ë¦¬)</p>
            </div>

            <div class="module-card">
                <h3>Phase 2: 3D Vector Evaluation (íŒë‹¨)</h3>
                <p><strong>ì—­í• :</strong> ì¶”ì¶œëœ ì‚¬ì‹¤ì„ ë°”íƒ•ìœ¼ë¡œ ë¦¬ìŠ¤í¬ë¥¼ ìˆ˜í•™ì ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
                <p><strong>ê¸°ìˆ :</strong> <code>VectorEvaluationService.js</code></p>
                <p><strong>ë¡œì§:</strong></p>
                <ul>
                    <li><strong>Xì¶• (ì¤‘ì¦ë„):</strong> ì§ˆë³‘ì˜ ì‹¬ê°ë„ (ì•”=10, ê°ê¸°=1)</li>
                    <li><strong>Yì¶• (ì‹œê³„ì—´):</strong> ê³„ì•½ì¼ ê¸°ì¤€ ë°œìƒ ì‹œì  (-5=ê³„ì•½ì „, +10=ë³´ì¥ê¸°ê°„)</li>
                    <li><strong>Zì¶• (í™•ì‹¤ì„±):</strong> ì§„ë‹¨ì˜ ì˜í•™ì  ê·¼ê±° (ì¡°ì§ê²€ì‚¬=10, ì¦ìƒí˜¸ì†Œ=2)</li>
                </ul>
                <p><strong>LLM í™œìš©:</strong> ì—†ìŒ (ì¼ê´€ëœ íŒë‹¨ì„ ìœ„í•´ ì•Œê³ ë¦¬ì¦˜ ì²˜ë¦¬)</p>
            </div>

            <div class="module-card llm-highlight">
                <h3>Phase 3: Writer Agent (ì„œìˆ  & ë³´ê³ ì„œ ì‘ì„±)</h3>
                <p><strong>ì—­í• :</strong> íŒë‹¨ ê²°ê³¼(Vector)ì™€ ì‚¬ì‹¤ ë°ì´í„°(Facts)ë¥¼ ì¢…í•©í•˜ì—¬ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ ì‹¬ì‚¬ ë³´ê³ ì„œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
                <p><strong>ê¸°ìˆ :</strong> <code>WriterAgentService.js</code> -> <code>MedicalAnalysisService.js</code> ->
                    <code>OpenAI API</code></p>
                <p><strong>LLM í™œìš© (í•µì‹¬):</strong></p>
                <ul>
                    <li><strong>ì…ë ¥ (Prompt):</strong> 3D ë²¡í„° ê²°ê³¼, í•µì‹¬ ì´ë²¤íŠ¸, ê³„ì•½ ì •ë³´, ì‹¬ì‚¬ ê°€ì´ë“œë¼ì¸</li>
                    <li><strong>ì‘ì—…:</strong> "ì´ ê±´ì´ ì™œ ê³ ì§€ì˜ë¬´ ìœ„ë°˜ ìœ„í—˜ì¸ì§€ ì„¤ëª…í•˜ë¼", "ì•½ê´€ì— ì˜ê±°í•˜ì—¬ ì§€ê¸‰ ì‚¬ìœ ë¥¼ ì„œìˆ í•˜ë¼"</li>
                    <li><strong>ì¶œë ¥:</strong> ë…¼ë¦¬ì ì´ê³  ì„¤ë“ë ¥ ìˆëŠ” ì‹¬ì‚¬ ì˜ê²¬ì„œ</li>
                </ul>
            </div>
        </section>

        <section>
            <h2>3. ê²€ì¦ ì´ìŠˆ ë° ê°œì„  ê³„íš (Verification Status)</h2>
            <div class="module-card" style="border-left-color: #e74c3c;">
                <h3>âš ï¸ í˜„ì¬ ê²€ì¦ì˜ í•œê³„ (Current Limitation)</h3>
                <p>ì‚¬ìš©ìë‹˜ê»˜ì„œ ì§€ì í•˜ì‹  ëŒ€ë¡œ, <strong>í˜„ì¬ì˜ ê²€ì¦(Verify Script)ì€ LLMì„ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šê³  'í…œí”Œë¦¿(Template)'ì„ ì‚¬ìš©í•˜ì—¬
                        ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.</strong></p>
                <ul>
                    <li><strong>ì´ìœ :</strong> ì´ˆê¸° ê°œë°œ ì†ë„ë¥¼ ìœ„í•´ ì •í•´ì§„ ë¬¸êµ¬ë¥¼ ì¡°í•©í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</li>
                    <li><strong>ë¬¸ì œì :</strong> ì‹¤ì œ LLMì˜ ë¬¸ë§¥ íŒŒì•… ëŠ¥ë ¥ì´ë‚˜ ìœ ì—°í•œ ì„œìˆ  ëŠ¥ë ¥ì´ ë°˜ì˜ë˜ì§€ ì•Šì•„, ë³µì¡í•œ ì¼€ì´ìŠ¤ì—ì„œ ì •í™•ë„ê°€ ë–¨ì–´ì§€ê±°ë‚˜ ê¸°ê³„ì ì¸ ë‹µë³€ë§Œ
                        ìƒì„±ë©ë‹ˆë‹¤.</li>
                </ul>
            </div>

            <div class="module-card" style="border-left-color: #27ae60;">
                <h3>ğŸš€ ê°œì„  ê³„íš (Improvement Plan)</h3>
                <p>ì¦‰ì‹œ <strong>Real LLM Integration</strong>ì„ ìˆ˜í–‰í•˜ê² ìŠµë‹ˆë‹¤.</p>
                <ol>
                    <li><strong>WriterAgentService ìˆ˜ì •:</strong> í…œí”Œë¦¿ ë°©ì‹ì„ ì œê±°í•˜ê³ , <code>MedicalAnalysisService.js</code>ì˜
                        <code>performAIAnalysis</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤.</li>
                    <li><strong>í”„ë¡¬í”„íŠ¸ ìµœì í™”:</strong> 3D ë²¡í„° ì¢Œí‘œì™€ ë¦¬ìŠ¤í¬ íƒ€ì…(VIOLATION_RISK ë“±)ì„ í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œì ìœ¼ë¡œ í¬í•¨í•˜ì—¬ LLMì´ ì´ë¥¼ ê·¼ê±°ë¡œ ê¸€ì„
                        ì“°ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤.</li>
                    <li><strong>ì¬ê²€ì¦:</strong> ì‹¤ì œ LLMì´ ìƒì„±í•œ ë³´ê³ ì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ 46ê°œ ì¼€ì´ìŠ¤ë¥¼ ë‹¤ì‹œ ê²€ì¦í•©ë‹ˆë‹¤.</li>
                </ol>
            </div>
        </section>
    </div>
</body>

</html>