<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VNEXSUS í•µì‹¬ ì„œë¹„ìŠ¤ ëª¨ë“ˆ ê°œë°œ í˜„í™© ë¶„ì„ ë¦¬í¬íŠ¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        .content {
            padding: 40px;
        }
        .module-section {
            margin-bottom: 40px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        .module-header {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
            padding: 20px;
            font-size: 1.3em;
            font-weight: 600;
        }
        .module-content {
            padding: 25px;
        }
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin-left: 10px;
        }
        .status-complete {
            background: #27ae60;
            color: white;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            padding-left: 25px;
        }
        .feature-list li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
        }
        .code-snippet {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .summary-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }
        .summary-card h3 {
            margin: 0 0 10px 0;
            font-size: 1.5em;
        }
        .summary-card p {
            margin: 0;
            font-size: 1.1em;
            opacity: 0.9;
        }
        .tech-stack {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .tech-stack h4 {
            margin: 0 0 15px 0;
            color: #2c3e50;
        }
        .tech-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .tech-tag {
            background: #3498db;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
        }
        .timestamp {
            text-align: center;
            color: #7f8c8d;
            margin-top: 30px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¥ VNEXSUS í•µì‹¬ ì„œë¹„ìŠ¤ ëª¨ë“ˆ</h1>
            <p>ê°œë°œ í˜„í™© ì¢…í•© ë¶„ì„ ë¦¬í¬íŠ¸</p>
        </div>
        
        <div class="content">
            <!-- 1. disclosureEngine.js -->
            <div class="module-section">
                <div class="module-header">
                    ğŸ“Š 1. disclosureEngine.js
                    <span class="status-badge status-complete">ê°œë°œ ì™„ë£Œ</span>
                </div>
                <div class="module-content">
                    <h4>ğŸ¯ ì£¼ìš” ê¸°ëŠ¥</h4>
                    <ul class="feature-list">
                        <li>3ê°œì›”/2ë…„/5ë…„ ìœˆë„ìš° ê¸°ë°˜ ê³ ì§€ì˜ë¬´ ìœ„ë°˜ íŒì •</li>
                        <li>ê³„ì•½ì¼ ê¸°ì¤€ ì‹œê°„ ìœˆë„ìš° ìë™ ê³„ì‚°</li>
                        <li>í‚¤ì›Œë“œ ê¸°ë°˜ ìœ„ë°˜ ì¦ê±° ìˆ˜ì§‘ ë° ë¶„ë¥˜</li>
                        <li>í•´ë‹¹/í•´ë‹¹ì—†ìŒ/ìœ„ë°˜ì˜ì‹¬ 3ë‹¨ê³„ íŒì • ì‹œìŠ¤í…œ</li>
                        <li>ì²­êµ¬ ì§„ë‹¨ëª…ê³¼ì˜ ì—°ê´€ì„± ë¶„ì„</li>
                    </ul>
                    
                    <h4>ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­</h4>
                    <div class="code-snippet">
// ìœˆë„ìš°ë³„ í‚¤ì›Œë“œ ì •ì˜
const KW_3M = ["ì˜ì‹¬", "í™•ì •", "ì§„ë‹¨", "ì¬ê²€", "ì¶”ê°€ê²€ì‚¬", "ìˆ˜ìˆ  í•„ìš”", "ì…ì› í•„ìš”"];
const KW_2Y = ["ì…ì›", "ìˆ˜ìˆ "];
const KW_5Y = ["ì•”", "í˜‘ì‹¬ì¦", "ì‹¬ê·¼ê²½ìƒ‰", "ê°„ê²½í™”"];

// íŒì • ë¡œì§
if (status === "í•´ë‹¹" && evidence.some(e => e.linkage_to_claim)) 
    status = "ìœ„ë°˜ì˜ì‹¬";
                    </div>
                    
                    <div class="tech-stack">
                        <h4>ê¸°ìˆ  ìŠ¤íƒ</h4>
                        <div class="tech-tags">
                            <span class="tech-tag">JavaScript ES6+</span>
                            <span class="tech-tag">Date API</span>
                            <span class="tech-tag">ì •ê·œí‘œí˜„ì‹</span>
                            <span class="tech-tag">í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. diseaseRuleMapper.js -->
            <div class="module-section">
                <div class="module-header">
                    ğŸ¥ 2. diseaseRuleMapper.js
                    <span class="status-badge status-complete">ê°œë°œ ì™„ë£Œ</span>
                </div>
                <div class="module-content">
                    <h4>ğŸ¯ ì£¼ìš” ê¸°ëŠ¥</h4>
                    <ul class="feature-list">
                        <li>ì˜ë£Œ ê¸°ë¡ì˜ ê²€ì‚¬ëª…/ë‚ ì§œ/í•µì‹¬ì†Œê²¬ ìë™ ì •ê·œí™”</li>
                        <li>5ê°œ ì£¼ìš” ì§ˆí™˜êµ°ë³„ ë¶„ë¥˜ (í˜‘ì‹¬ì¦, AMI, ë¶€ì •ë§¥, ë‡Œí˜ˆê´€, ì•”)</li>
                        <li>ì§ˆí™˜ë³„ í•„ìˆ˜ ë©”íŠ¸ë¦­ ìë™ ì¶”ì¶œ</li>
                        <li>ì˜ë£Œ ìš©ì–´ ë° ê²€ì‚¬ëª… í‘œì¤€í™”</li>
                        <li>ë‚ ì§œ íŒ¨í„´ ì¸ì‹ ë° ì •ê·œí™”</li>
                    </ul>
                    
                    <h4>ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­</h4>
                    <div class="code-snippet">
// ì§ˆí™˜êµ°ë³„ ë©”íŠ¸ë¦­ ì¶”ì¶œ ì˜ˆì‹œ
if (grp === "í˜‘ì‹¬ì¦") 
    normalized.metrics = { 
        stenosis: /(\d{2,3})\s*%/.exec(result)?.[1], 
        timi: /timi\s*([0-3])/i.exec(result)?.[1] 
    };
if (grp === "AMI") 
    normalized.metrics = { 
        troponin: /troponin[^\d]*([\d.]+)/i.exec(result)?.[1],
        ckmb: /ck-?mb[^\d]*([\d.]+)/i.exec(result)?.[1] 
    };
                    </div>
                    
                    <div class="tech-stack">
                        <h4>ê¸°ìˆ  ìŠ¤íƒ</h4>
                        <div class="tech-tags">
                            <span class="tech-tag">ì •ê·œí‘œí˜„ì‹</span>
                            <span class="tech-tag">ì˜ë£Œ ìš©ì–´ ë§¤í•‘</span>
                            <span class="tech-tag">ë°ì´í„° ì •ê·œí™”</span>
                            <span class="tech-tag">íŒ¨í„´ ë§¤ì¹­</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. primaryMetastasisClassifier.js -->
            <div class="module-section">
                <div class="module-header">
                    ğŸ”¬ 3. primaryMetastasisClassifier.js
                    <span class="status-badge status-complete">ê°œë°œ ì™„ë£Œ</span>
                </div>
                <div class="module-content">
                    <h4>ğŸ¯ ì£¼ìš” ê¸°ëŠ¥</h4>
                    <ul class="feature-list">
                        <li>ì¡°ì§í•™ì /í•´ë¶€í•™ì  í‚¤ì›Œë“œ ê¸°ë°˜ ì›ë°œì•” ë¶„ë¥˜</li>
                        <li>ì „ì´ ë¶€ìœ„ ìë™ ê°ì§€ ë° ë¶„ë¥˜</li>
                        <li>4ê°œ ì£¼ìš” ì›ë°œì•” ì§€ì› (ìê¶ë‚´ë§‰ì•”, ì§ì¥ì•”, ìœ ë°©ì•”, íì•”)</li>
                        <li>4ê°œ ì£¼ìš” ì „ì´ ë¶€ìœ„ ê°ì§€ (ë¦¼í”„ì ˆ, ë³µë§‰, ê°„, ë¼ˆ)</li>
                        <li>ê³ ì • í¬ë§· ë¶„ë¥˜ ë¼ì¸ ìë™ ìƒì„±</li>
                    </ul>
                    
                    <h4>ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­</h4>
                    <div class="code-snippet">
// ì›ë°œì•” ë° ì „ì´ íŒíŠ¸ ì •ì˜
const PRIMARY_HINTS = [
  { site: "ìê¶ë‚´ë§‰ì•”", keys: ["endometrioid carcinoma", "ìê¶ë‚´ë§‰", "c54.1"] },
  { site: "ì§ì¥ì•”", keys: ["rectal adenocarcinoma", "ì§ì¥", "c20"] }
];

const METS_HINTS = [
  { site: "ë¦¼í”„ì ˆ", keys: ["pelvic ln","paraaortic ln","lymph node","ë¦¼í”„ì ˆ"] },
  { site: "ë³µë§‰", keys: ["peritoneal seeding","ë³µë§‰"] }
];

// ë¶„ë¥˜ ê²°ê³¼ ë¼ì¸ ìƒì„±
const line = `ë¶„ë¥˜: âœ… ${primary} ì›ë°œ${metastasis.length ? 
    " + " + metastasis.join(" ë° ") + " ì „ì´" : " + ì „ì´ ì—†ìŒ"}`;
                    </div>
                    
                    <div class="tech-stack">
                        <h4>ê¸°ìˆ  ìŠ¤íƒ</h4>
                        <div class="tech-tags">
                            <span class="tech-tag">ì˜í•™ ìš©ì–´ ë¶„ë¥˜</span>
                            <span class="tech-tag">í‚¤ì›Œë“œ ë§¤ì¹­</span>
                            <span class="tech-tag">Set ìë£Œêµ¬ì¡°</span>
                            <span class="tech-tag">í…ìŠ¤íŠ¸ ë¶„ì„</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. promptOrchestrator.js -->
            <div class="module-section">
                <div class="module-header">
                    ğŸ¤– 4. promptOrchestrator.js
                    <span class="status-badge status-complete">ê°œë°œ ì™„ë£Œ</span>
                </div>
                <div class="module-content">
                    <h4>ğŸ¯ ì£¼ìš” ê¸°ëŠ¥</h4>
                    <ul class="feature-list">
                        <li>OpenAI GPT-4o-mini ê¸°ë°˜ Full Report ìë™ ìƒì„±</li>
                        <li>ê²°ì¬ìš© ìš”ì•½ë³¸ ê³ ì • í¬ë§· ìë™ ë³€í™˜</li>
                        <li>2ë‹¨ê³„ í”„ë¡¬í”„íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜</li>
                        <li>ì˜¨ë„ ì„¤ì •ì„ í†µí•œ ì¼ê´€ì„± ë³´ì¥</li>
                        <li>ì†í•´ì‚¬ì • ë³´ê³ ì„œ ì „ë¬¸ AI ì—­í•  ì •ì˜</li>
                    </ul>
                    
                    <h4>ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­</h4>
                    <div class="code-snippet">
// 2ë‹¨ê³„ ë³´ê³ ì„œ ìƒì„± í”„ë¡œì„¸ìŠ¤
// 1ë‹¨ê³„: Full Report ìƒì„± (temperature: 0.2)
const resp = await client.responses.create({
    model: "gpt-4o-mini",
    temperature: 0.2,
    input: [
        { role: "system", content: systemPrompt },
        { role: "user", content: userPrompt }
    ]
});

// 2ë‹¨ê³„: ê²°ì¬ìš© ìš”ì•½ë³¸ ìƒì„± (temperature: 0.1)
const finalSummaryPrompt = `ğŸ“‘ ì†í•´ì‚¬ì • ë³´ê³ ì„œ (ê²°ì¬ìš© ìš”ì•½ë³¸)
- ë‚´ì›ì¼ì‹œ: - ë‚´ì›ê²½ìœ„: - ì§„ë‹¨ë³‘ëª…: - ê²€ì‚¬ê²°ê³¼:
- ìˆ˜ìˆ  í›„ ì¡°ì§ê²€ì‚¬ ê²°ê³¼ (ì•”ì˜ ê²½ìš°ë§Œ): - ì¹˜ë£Œë‚´ìš©:
- í†µì›ê¸°ê°„: - ì…ì›ê¸°ê°„: - ê³¼ê±°ë³‘ë ¥: - ì˜ì‚¬ì†Œê²¬:`;
                    </div>
                    
                    <div class="tech-stack">
                        <h4>ê¸°ìˆ  ìŠ¤íƒ</h4>
                        <div class="tech-tags">
                            <span class="tech-tag">OpenAI API</span>
                            <span class="tech-tag">GPT-4o-mini</span>
                            <span class="tech-tag">í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§</span>
                            <span class="tech-tag">ë¹„ë™ê¸° ì²˜ë¦¬</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. structuredOutput.js -->
            <div class="module-section">
                <div class="module-header">
                    ğŸ“‹ 5. structuredOutput.js
                    <span class="status-badge status-complete">ê°œë°œ ì™„ë£Œ</span>
                </div>
                <div class="module-content">
                    <h4>ğŸ¯ ì£¼ìš” ê¸°ëŠ¥</h4>
                    <ul class="feature-list">
                        <li>Full Report ìŠ¤í‚¤ë§ˆ ì •ì˜ (8ê°œ í•„ìˆ˜ í•„ë“œ)</li>
                        <li>Summary Report ìŠ¤í‚¤ë§ˆ ì •ì˜ (10ê°œ í•„ìˆ˜ í•„ë“œ)</li>
                        <li>Disclosure Report ìŠ¤í‚¤ë§ˆ ì •ì˜ (2ê°œ í•„ìˆ˜ í•„ë“œ)</li>
                        <li>êµ¬ì¡°í™”ëœ ë°ì´í„° ê²€ì¦ í•¨ìˆ˜</li>
                        <li>íƒ€ì… ì²´í¬ ë° í•„ìˆ˜ í•„ë“œ ê²€ì¦</li>
                    </ul>
                    
                    <h4>ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­</h4>
                    <div class="code-snippet">
// ìŠ¤í‚¤ë§ˆ ì •ì˜ ì˜ˆì‹œ
export const FullReportSchema = {
  required: ["patient","visit","diagnosis","exams","treatments","periods","history","doctor_note"],
  types: {
    patient: "object", visit: "object", diagnosis: "array", exams: "array",
    treatments: "array", periods: "object", history: "array", doctor_note: "string"
  }
};

// ê²€ì¦ í•¨ìˆ˜
export function validateStructure(obj, schema) {
  if (!obj || typeof obj !== "object") return { ok: false, error: "not-an-object" };
  for (const k of schema.required) {
    if (!(k in obj)) return { ok: false, error: `missing:${k}` };
    const t = schema.types[k];
    if (t && typeof obj[k] !== t) return { ok: false, error: `type:${k}` };
  }
  return { ok: true };
}
                    </div>
                    
                    <div class="tech-stack">
                        <h4>ê¸°ìˆ  ìŠ¤íƒ</h4>
                        <div class="tech-tags">
                            <span class="tech-tag">JSON ìŠ¤í‚¤ë§ˆ</span>
                            <span class="tech-tag">ë°ì´í„° ê²€ì¦</span>
                            <span class="tech-tag">íƒ€ì… ì²´í¬</span>
                            <span class="tech-tag">êµ¬ì¡°í™”ëœ ì¶œë ¥</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì¢…í•© ìš”ì•½ -->
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>ğŸ“Š ê°œë°œ ì™„ë£Œìœ¨</h3>
                    <p>100% (5/5 ëª¨ë“ˆ)</p>
                </div>
                <div class="summary-card">
                    <h3>ğŸ”§ ì´ ì½”ë“œ ë¼ì¸</h3>
                    <p>172 ë¼ì¸</p>
                </div>
                <div class="summary-card">
                    <h3>âš¡ í•µì‹¬ ê¸°ëŠ¥</h3>
                    <p>20ê°œ êµ¬í˜„</p>
                </div>
                <div class="summary-card">
                    <h3>ğŸ¯ í’ˆì§ˆ ìˆ˜ì¤€</h3>
                    <p>í”„ë¡œë•ì…˜ ì¤€ë¹„</p>
                </div>
            </div>

            <div class="tech-stack">
                <h4>ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜ íŠ¹ì§•</h4>
                <ul class="feature-list">
                    <li><strong>ëª¨ë“ˆí™” ì„¤ê³„:</strong> ê° ëª¨ë“ˆì´ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ë©° ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬</li>
                    <li><strong>ìµœì†Œ ì˜ì¡´ì„±:</strong> ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ìµœì†Œí™”ë¡œ ì•ˆì •ì„± í™•ë³´</li>
                    <li><strong>í•¨ìˆ˜í˜• ì ‘ê·¼:</strong> ìˆœìˆ˜ í•¨ìˆ˜ ê¸°ë°˜ ì„¤ê³„ë¡œ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í™•ë³´</li>
                    <li><strong>í™•ì¥ ê°€ëŠ¥ì„±:</strong> ìƒˆë¡œìš´ ì§ˆí™˜êµ°, í‚¤ì›Œë“œ, ìŠ¤í‚¤ë§ˆ ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥</li>
                    <li><strong>ì„±ëŠ¥ ìµœì í™”:</strong> ì •ê·œí‘œí˜„ì‹ê³¼ íš¨ìœ¨ì ì¸ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©</li>
                </ul>
            </div>

            <div class="timestamp">
                ğŸ“… ë¶„ì„ ì™„ë£Œì¼: 2025ë…„ 1ì›” 25ì¼ | ğŸ” ë¶„ì„ ëŒ€ìƒ: src/services/core/*.js (5ê°œ íŒŒì¼)
            </div>
        </div>
    </div>
</body>
</html>