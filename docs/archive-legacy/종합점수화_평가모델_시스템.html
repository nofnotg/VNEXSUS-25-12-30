<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¢…í•© ì ìˆ˜í™” í‰ê°€ ëª¨ë¸ ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .control-panel {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .score-display {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 15px;
            margin: 20px 0;
        }

        .total-score {
            font-size: 4em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .score-grade {
            font-size: 1.5em;
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
        }

        .grade-A { background: linear-gradient(135deg, #27ae60, #2ecc71); }
        .grade-B { background: linear-gradient(135deg, #3498db, #5dade2); }
        .grade-C { background: linear-gradient(135deg, #f39c12, #f7dc6f); }
        .grade-D { background: linear-gradient(135deg, #e74c3c, #ec7063); }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
        }

        .metric-label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .data-items-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .data-item {
            background: #f8f9fa;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .data-item h4 {
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .data-item-score {
            float: right;
            background: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
        }

        .context-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .context-item {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #27ae60;
        }

        .chart-container {
            height: 300px;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .evaluation-matrix {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .evaluation-matrix th, .evaluation-matrix td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        .evaluation-matrix th {
            background: #3498db;
            color: white;
        }

        .evaluation-matrix tr:nth-child(even) {
            background: #f8f9fa;
        }

        .weight-slider {
            width: 100%;
            margin: 10px 0;
        }

        .algorithm-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .algorithm-option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .algorithm-option:hover {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .algorithm-option.selected {
            border-color: #3498db;
            background: #3498db;
            color: white;
        }

        .insights-panel {
            background: linear-gradient(135deg, #fff3e0, #ffecb3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .insight-item {
            margin: 10px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #ff9800;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ ì¢…í•© ì ìˆ˜í™” í‰ê°€ ëª¨ë¸ ì‹œìŠ¤í…œ</h1>
            <p>ì •ëŸ‰ì /ì •ì„±ì  ì§€í‘œ ê¸°ë°˜ AI í‰ê°€ ë° ì»¨í…ìŠ¤íŠ¸ ë¶„ì„ í”Œë«í¼</p>
        </div>

        <div class="main-content">
            <!-- ì œì–´ íŒ¨ë„ -->
            <div class="section control-panel">
                <h2>ğŸ“Š í‰ê°€ ì œì–´ íŒ¨ë„</h2>
                
                <div class="input-group">
                    <label>í‰ê°€ ëŒ€ìƒ ë°ì´í„°</label>
                    <textarea id="evaluationData" rows="4" placeholder="í‰ê°€í•  ë°ì´í„°ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>

                <div class="algorithm-selector">
                    <div class="algorithm-option selected" data-algorithm="comprehensive">
                        ì¢…í•© í‰ê°€
                    </div>
                    <div class="algorithm-option" data-algorithm="quantitative">
                        ì •ëŸ‰ì  í‰ê°€
                    </div>
                    <div class="algorithm-option" data-algorithm="qualitative">
                        ì •ì„±ì  í‰ê°€
                    </div>
                    <div class="algorithm-option" data-algorithm="contextual">
                        ì»¨í…ìŠ¤íŠ¸ í‰ê°€
                    </div>
                </div>

                <div class="input-group">
                    <label>í‰ê°€ ê°€ì¤‘ì¹˜ ì„¤ì •</label>
                    <div>
                        <label>ì •ëŸ‰ì  ì§€í‘œ ê°€ì¤‘ì¹˜: <span id="quantWeight">50</span>%</label>
                        <input type="range" class="weight-slider" id="quantWeightSlider" min="0" max="100" value="50">
                    </div>
                    <div>
                        <label>ì •ì„±ì  ì§€í‘œ ê°€ì¤‘ì¹˜: <span id="qualWeight">30</span>%</label>
                        <input type="range" class="weight-slider" id="qualWeightSlider" min="0" max="100" value="30">
                    </div>
                    <div>
                        <label>ì»¨í…ìŠ¤íŠ¸ ì§€í‘œ ê°€ì¤‘ì¹˜: <span id="contextWeight">20</span>%</label>
                        <input type="range" class="weight-slider" id="contextWeightSlider" min="0" max="100" value="20">
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" onclick="startEvaluation()">ğŸš€ í‰ê°€ ì‹œì‘</button>
                    <button class="btn btn-warning" onclick="resetEvaluation()">ğŸ”„ ì´ˆê¸°í™”</button>
                    <button class="btn" onclick="exportResults()">ğŸ“Š ê²°ê³¼ ë‚´ë³´ë‚´ê¸°</button>
                </div>
            </div>

            <!-- ì ìˆ˜ í‘œì‹œ -->
            <div class="section">
                <h2>ğŸ† ì¢…í•© ì ìˆ˜</h2>
                <div class="score-display">
                    <div class="total-score" id="totalScore">0</div>
                    <div class="score-grade grade-D" id="scoreGrade">ë¯¸í‰ê°€</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="scoreProgress" style="width: 0%"></div>
                    </div>
                </div>

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="quantScore">0</div>
                        <div class="metric-label">ì •ëŸ‰ì  ì ìˆ˜</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="qualScore">0</div>
                        <div class="metric-label">ì •ì„±ì  ì ìˆ˜</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="contextScore">0</div>
                        <div class="metric-label">ì»¨í…ìŠ¤íŠ¸ ì ìˆ˜</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="reliabilityScore">0</div>
                        <div class="metric-label">ì‹ ë¢°ë„</div>
                    </div>
                </div>
            </div>

            <!-- ìœ ì˜ë¯¸ ë°ì´í„° 10í•­ëª© -->
            <div class="section">
                <h2>ğŸ“‹ ìœ ì˜ë¯¸ ë°ì´í„° 10í•­ëª© í‰ê°€</h2>
                <div class="data-items-list" id="dataItemsList">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>

            <!-- í‰ê°€ ë§¤íŠ¸ë¦­ìŠ¤ -->
            <div class="section">
                <h2>ğŸ“ˆ í‰ê°€ ë§¤íŠ¸ë¦­ìŠ¤</h2>
                <table class="evaluation-matrix" id="evaluationMatrix">
                    <thead>
                        <tr>
                            <th>í‰ê°€ í•­ëª©</th>
                            <th>ê°€ì¤‘ì¹˜</th>
                            <th>ì ìˆ˜</th>
                            <th>ê¸°ì—¬ë„</th>
                        </tr>
                    </thead>
                    <tbody id="matrixBody">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </tbody>
                </table>
            </div>

            <!-- ì»¨í…ìŠ¤íŠ¸ ë¶„ì„ -->
            <div class="section">
                <h2>ğŸ” ì»¨í…ìŠ¤íŠ¸ ë¶„ì„</h2>
                <div class="context-panel" id="contextPanel">
                    <div class="context-item">
                        <strong>ë°ì´í„° ì™„ì„±ë„:</strong> <span id="dataCompleteness">ë¶„ì„ ì¤‘...</span>
                    </div>
                    <div class="context-item">
                        <strong>ì‹œê³„ì—´ ì¼ê´€ì„±:</strong> <span id="timeConsistency">ë¶„ì„ ì¤‘...</span>
                    </div>
                    <div class="context-item">
                        <strong>ì—°ê´€ì„± ê°•ë„:</strong> <span id="correlationStrength">ë¶„ì„ ì¤‘...</span>
                    </div>
                    <div class="context-item">
                        <strong>ì´ìƒì¹˜ íƒì§€:</strong> <span id="anomalyDetection">ë¶„ì„ ì¤‘...</span>
                    </div>
                </div>
            </div>

            <!-- ì°¨íŠ¸ ì‹œê°í™” -->
            <div class="section">
                <h2>ğŸ“Š ì ìˆ˜ ë¶„í¬ ì°¨íŠ¸</h2>
                <div class="chart-container">
                    <canvas id="scoreChart" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- ì¸ì‚¬ì´íŠ¸ íŒ¨ë„ -->
            <div class="section">
                <h2>ğŸ’¡ í‰ê°€ ì¸ì‚¬ì´íŠ¸</h2>
                <div class="insights-panel" id="insightsPanel">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì¢…í•© ì ìˆ˜í™” í‰ê°€ ëª¨ë¸ í´ë˜ìŠ¤
        class ComprehensiveEvaluationModel {
            constructor() {
                this.meaningfulDataItems = [
                    { id: 1, name: "ì§„ë‹¨ ì •í™•ì„±", weight: 0.15, category: "quantitative" },
                    { id: 2, name: "ì‹œê³„ì—´ ì¼ê´€ì„±", weight: 0.12, category: "quantitative" },
                    { id: 3, name: "ë°ì´í„° ì™„ì„±ë„", weight: 0.10, category: "quantitative" },
                    { id: 4, name: "ì˜ë£Œ ì—°ê´€ì„±", weight: 0.13, category: "qualitative" },
                    { id: 5, name: "ë³´í—˜ ì í•©ì„±", weight: 0.11, category: "qualitative" },
                    { id: 6, name: "ë¬¸ì„œ í’ˆì§ˆ", weight: 0.09, category: "qualitative" },
                    { id: 7, name: "ì»¨í…ìŠ¤íŠ¸ í’ë¶€ì„±", weight: 0.08, category: "contextual" },
                    { id: 8, name: "íŒ¨í„´ ì¼ì¹˜ë„", weight: 0.07, category: "contextual" },
                    { id: 9, name: "ì´ìƒì¹˜ íƒì§€", weight: 0.08, category: "contextual" },
                    { id: 10, name: "ì˜ˆì¸¡ ì‹ ë¢°ë„", weight: 0.07, category: "contextual" }
                ];
                
                this.evaluationWeights = {
                    quantitative: 0.5,
                    qualitative: 0.3,
                    contextual: 0.2
                };
                
                this.currentScores = {};
                this.evaluationResults = {};
            }

            // ì¢…í•© í‰ê°€ ì‹¤í–‰
            evaluateData(data) {
                const results = {
                    quantitative: this.evaluateQuantitative(data),
                    qualitative: this.evaluateQualitative(data),
                    contextual: this.evaluateContextual(data),
                    itemScores: {},
                    insights: []
                };

                // ê° í•­ëª©ë³„ ì ìˆ˜ ê³„ì‚°
                this.meaningfulDataItems.forEach(item => {
                    const score = this.evaluateItem(item, data);
                    results.itemScores[item.id] = score;
                });

                // ì¢…í•© ì ìˆ˜ ê³„ì‚°
                results.totalScore = this.calculateTotalScore(results);
                results.grade = this.calculateGrade(results.totalScore);
                results.reliability = this.calculateReliability(results);

                // ì¸ì‚¬ì´íŠ¸ ìƒì„±
                results.insights = this.generateInsights(results);

                this.evaluationResults = results;
                return results;
            }

            // ì •ëŸ‰ì  í‰ê°€
            evaluateQuantitative(data) {
                const metrics = {
                    accuracy: this.calculateAccuracy(data),
                    completeness: this.calculateCompleteness(data),
                    consistency: this.calculateConsistency(data)
                };

                return (metrics.accuracy + metrics.completeness + metrics.consistency) / 3;
            }

            // ì •ì„±ì  í‰ê°€
            evaluateQualitative(data) {
                const metrics = {
                    relevance: this.calculateRelevance(data),
                    quality: this.calculateQuality(data),
                    appropriateness: this.calculateAppropriateness(data)
                };

                return (metrics.relevance + metrics.quality + metrics.appropriateness) / 3;
            }

            // ì»¨í…ìŠ¤íŠ¸ í‰ê°€
            evaluateContextual(data) {
                const metrics = {
                    richness: this.calculateContextRichness(data),
                    coherence: this.calculateCoherence(data),
                    predictability: this.calculatePredictability(data)
                };

                return (metrics.richness + metrics.coherence + metrics.predictability) / 3;
            }

            // ê°œë³„ í•­ëª© í‰ê°€
            evaluateItem(item, data) {
                const baseScore = Math.random() * 100; // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
                const categoryBonus = this.getCategoryBonus(item.category, data);
                const weightedScore = (baseScore + categoryBonus) * item.weight;
                
                return Math.min(100, Math.max(0, weightedScore));
            }

            // ì¹´í…Œê³ ë¦¬ë³„ ë³´ë„ˆìŠ¤ ê³„ì‚°
            getCategoryBonus(category, data) {
                switch(category) {
                    case 'quantitative':
                        return data.length > 100 ? 10 : 0;
                    case 'qualitative':
                        return data.includes('ì§„ë‹¨') ? 15 : 0;
                    case 'contextual':
                        return data.includes('ì—°ê´€ì„±') ? 12 : 0;
                    default:
                        return 0;
                }
            }

            // ì¢…í•© ì ìˆ˜ ê³„ì‚°
            calculateTotalScore(results) {
                return (
                    results.quantitative * this.evaluationWeights.quantitative +
                    results.qualitative * this.evaluationWeights.qualitative +
                    results.contextual * this.evaluationWeights.contextual
                );
            }

            // ë“±ê¸‰ ê³„ì‚°
            calculateGrade(score) {
                if (score >= 90) return 'A';
                if (score >= 80) return 'B';
                if (score >= 70) return 'C';
                return 'D';
            }

            // ì‹ ë¢°ë„ ê³„ì‚°
            calculateReliability(results) {
                const variance = this.calculateVariance([
                    results.quantitative,
                    results.qualitative,
                    results.contextual
                ]);
                
                return Math.max(0, 100 - variance * 10);
            }

            // ë¶„ì‚° ê³„ì‚°
            calculateVariance(scores) {
                const mean = scores.reduce((a, b) => a + b) / scores.length;
                const variance = scores.reduce((acc, score) => acc + Math.pow(score - mean, 2), 0) / scores.length;
                return Math.sqrt(variance);
            }

            // ì •í™•ë„ ê³„ì‚°
            calculateAccuracy(data) {
                return 75 + Math.random() * 20;
            }

            // ì™„ì„±ë„ ê³„ì‚°
            calculateCompleteness(data) {
                return 70 + Math.random() * 25;
            }

            // ì¼ê´€ì„± ê³„ì‚°
            calculateConsistency(data) {
                return 80 + Math.random() * 15;
            }

            // ì—°ê´€ì„± ê³„ì‚°
            calculateRelevance(data) {
                return 85 + Math.random() * 10;
            }

            // í’ˆì§ˆ ê³„ì‚°
            calculateQuality(data) {
                return 78 + Math.random() * 18;
            }

            // ì í•©ì„± ê³„ì‚°
            calculateAppropriateness(data) {
                return 82 + Math.random() * 13;
            }

            // ì»¨í…ìŠ¤íŠ¸ í’ë¶€ì„± ê³„ì‚°
            calculateContextRichness(data) {
                return 73 + Math.random() * 22;
            }

            // ì¼ê´€ì„± ê³„ì‚°
            calculateCoherence(data) {
                return 79 + Math.random() * 16;
            }

            // ì˜ˆì¸¡ ê°€ëŠ¥ì„± ê³„ì‚°
            calculatePredictability(data) {
                return 76 + Math.random() * 19;
            }

            // ì¸ì‚¬ì´íŠ¸ ìƒì„±
            generateInsights(results) {
                const insights = [];
                
                if (results.quantitative > 85) {
                    insights.push("ì •ëŸ‰ì  ì§€í‘œê°€ ìš°ìˆ˜í•©ë‹ˆë‹¤. ë°ì´í„°ì˜ ì •í™•ì„±ê³¼ ì™„ì„±ë„ê°€ ë†’ìŠµë‹ˆë‹¤.");
                }
                
                if (results.qualitative > 80) {
                    insights.push("ì •ì„±ì  í‰ê°€ì—ì„œ ì¢‹ì€ ê²°ê³¼ë¥¼ ë³´ì…ë‹ˆë‹¤. ì˜ë£Œ ì—°ê´€ì„±ì´ ë†’ìŠµë‹ˆë‹¤.");
                }
                
                if (results.contextual > 75) {
                    insights.push("ì»¨í…ìŠ¤íŠ¸ ë¶„ì„ì´ íš¨ê³¼ì ì…ë‹ˆë‹¤. íŒ¨í„´ ì¸ì‹ ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.");
                }
                
                if (results.reliability > 90) {
                    insights.push("í‰ê°€ ê²°ê³¼ì˜ ì‹ ë¢°ë„ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.");
                }
                
                return insights;
            }

            // ê°€ì¤‘ì¹˜ ì—…ë°ì´íŠ¸
            updateWeights(quantitative, qualitative, contextual) {
                const total = quantitative + qualitative + contextual;
                this.evaluationWeights = {
                    quantitative: quantitative / total,
                    qualitative: qualitative / total,
                    contextual: contextual / total
                };
            }
        }

        // ì „ì—­ ë³€ìˆ˜
        let evaluationModel = new ComprehensiveEvaluationModel();
        let currentResults = null;

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeUI();
            setupEventListeners();
            renderDataItems();
        });

        // UI ì´ˆê¸°í™”
        function initializeUI() {
            updateWeightDisplays();
            renderEvaluationMatrix();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ê°€ì¤‘ì¹˜ ìŠ¬ë¼ì´ë”
            document.getElementById('quantWeightSlider').addEventListener('input', updateWeights);
            document.getElementById('qualWeightSlider').addEventListener('input', updateWeights);
            document.getElementById('contextWeightSlider').addEventListener('input', updateWeights);

            // ì•Œê³ ë¦¬ì¦˜ ì„ íƒ
            document.querySelectorAll('.algorithm-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.algorithm-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        }

        // í‰ê°€ ì‹œì‘
        function startEvaluation() {
            const data = document.getElementById('evaluationData').value;
            if (!data.trim()) {
                alert('í‰ê°€í•  ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë¡œë”© í‘œì‹œ
            showLoading();

            // í‰ê°€ ì‹¤í–‰ (ì‹œë®¬ë ˆì´ì…˜)
            setTimeout(() => {
                currentResults = evaluationModel.evaluateData(data);
                displayResults(currentResults);
                hideLoading();
            }, 2000);
        }

        // ê²°ê³¼ í‘œì‹œ
        function displayResults(results) {
            // ì¢…í•© ì ìˆ˜ í‘œì‹œ
            document.getElementById('totalScore').textContent = Math.round(results.totalScore);
            document.getElementById('scoreProgress').style.width = results.totalScore + '%';
            
            const gradeElement = document.getElementById('scoreGrade');
            gradeElement.textContent = `ë“±ê¸‰ ${results.grade}`;
            gradeElement.className = `score-grade grade-${results.grade}`;

            // ê°œë³„ ì ìˆ˜ í‘œì‹œ
            document.getElementById('quantScore').textContent = Math.round(results.quantitative);
            document.getElementById('qualScore').textContent = Math.round(results.qualitative);
            document.getElementById('contextScore').textContent = Math.round(results.contextual);
            document.getElementById('reliabilityScore').textContent = Math.round(results.reliability) + '%';

            // ë°ì´í„° í•­ëª© ì ìˆ˜ ì—…ë°ì´íŠ¸
            updateDataItemsScores(results.itemScores);

            // í‰ê°€ ë§¤íŠ¸ë¦­ìŠ¤ ì—…ë°ì´íŠ¸
            updateEvaluationMatrix(results);

            // ì»¨í…ìŠ¤íŠ¸ ë¶„ì„ ì—…ë°ì´íŠ¸
            updateContextAnalysis(results);

            // ì¸ì‚¬ì´íŠ¸ í‘œì‹œ
            displayInsights(results.insights);

            // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
            drawScoreChart(results);
        }

        // ë°ì´í„° í•­ëª© ë Œë”ë§
        function renderDataItems() {
            const container = document.getElementById('dataItemsList');
            container.innerHTML = '';

            evaluationModel.meaningfulDataItems.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'data-item';
                itemDiv.innerHTML = `
                    <div class="data-item-score" id="score-${item.id}">0</div>
                    <h4>${item.name}</h4>
                    <p>ì¹´í…Œê³ ë¦¬: ${item.category} | ê°€ì¤‘ì¹˜: ${(item.weight * 100).toFixed(1)}%</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-${item.id}" style="width: 0%"></div>
                    </div>
                `;
                container.appendChild(itemDiv);
            });
        }

        // ë°ì´í„° í•­ëª© ì ìˆ˜ ì—…ë°ì´íŠ¸
        function updateDataItemsScores(itemScores) {
            Object.keys(itemScores).forEach(itemId => {
                const score = Math.round(itemScores[itemId]);
                document.getElementById(`score-${itemId}`).textContent = score;
                document.getElementById(`progress-${itemId}`).style.width = score + '%';
            });
        }

        // í‰ê°€ ë§¤íŠ¸ë¦­ìŠ¤ ë Œë”ë§
        function renderEvaluationMatrix() {
            const tbody = document.getElementById('matrixBody');
            tbody.innerHTML = '';

            evaluationModel.meaningfulDataItems.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${(item.weight * 100).toFixed(1)}%</td>
                    <td id="matrix-score-${item.id}">0</td>
                    <td id="matrix-contribution-${item.id}">0%</td>
                `;
                tbody.appendChild(row);
            });
        }

        // í‰ê°€ ë§¤íŠ¸ë¦­ìŠ¤ ì—…ë°ì´íŠ¸
        function updateEvaluationMatrix(results) {
            evaluationModel.meaningfulDataItems.forEach(item => {
                const score = Math.round(results.itemScores[item.id] || 0);
                const contribution = ((results.itemScores[item.id] || 0) * item.weight / results.totalScore * 100).toFixed(1);
                
                document.getElementById(`matrix-score-${item.id}`).textContent = score;
                document.getElementById(`matrix-contribution-${item.id}`).textContent = contribution + '%';
            });
        }

        // ì»¨í…ìŠ¤íŠ¸ ë¶„ì„ ì—…ë°ì´íŠ¸
        function updateContextAnalysis(results) {
            document.getElementById('dataCompleteness').textContent = Math.round(results.quantitative) + '%';
            document.getElementById('timeConsistency').textContent = Math.round(results.contextual) + '%';
            document.getElementById('correlationStrength').textContent = Math.round(results.qualitative) + '%';
            document.getElementById('anomalyDetection').textContent = results.reliability > 85 ? 'ì •ìƒ' : 'ì£¼ì˜ í•„ìš”';
        }

        // ì¸ì‚¬ì´íŠ¸ í‘œì‹œ
        function displayInsights(insights) {
            const container = document.getElementById('insightsPanel');
            container.innerHTML = '';

            insights.forEach(insight => {
                const insightDiv = document.createElement('div');
                insightDiv.className = 'insight-item';
                insightDiv.textContent = insight;
                container.appendChild(insightDiv);
            });
        }

        // ê°€ì¤‘ì¹˜ ì—…ë°ì´íŠ¸
        function updateWeights() {
            const quantWeight = parseInt(document.getElementById('quantWeightSlider').value);
            const qualWeight = parseInt(document.getElementById('qualWeightSlider').value);
            const contextWeight = parseInt(document.getElementById('contextWeightSlider').value);

            // ì´í•©ì´ 100ì´ ë˜ë„ë¡ ì¡°ì •
            const total = quantWeight + qualWeight + contextWeight;
            if (total !== 100) {
                const adjustment = (100 - total) / 3;
                document.getElementById('quantWeightSlider').value = quantWeight + adjustment;
                document.getElementById('qualWeightSlider').value = qualWeight + adjustment;
                document.getElementById('contextWeightSlider').value = contextWeight + adjustment;
            }

            updateWeightDisplays();
            evaluationModel.updateWeights(quantWeight, qualWeight, contextWeight);
        }

        // ê°€ì¤‘ì¹˜ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateWeightDisplays() {
            document.getElementById('quantWeight').textContent = document.getElementById('quantWeightSlider').value;
            document.getElementById('qualWeight').textContent = document.getElementById('qualWeightSlider').value;
            document.getElementById('contextWeight').textContent = document.getElementById('contextWeightSlider').value;
        }

        // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawScoreChart(results) {
            const canvas = document.getElementById('scoreChart');
            const ctx = canvas.getContext('2d');
            
            // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ë°ì´í„° ì¤€ë¹„
            const data = [
                { label: 'ì •ëŸ‰ì ', value: results.quantitative, color: '#3498db' },
                { label: 'ì •ì„±ì ', value: results.qualitative, color: '#27ae60' },
                { label: 'ì»¨í…ìŠ¤íŠ¸', value: results.contextual, color: '#f39c12' }
            ];
            
            // ë°” ì°¨íŠ¸ ê·¸ë¦¬ê¸°
            const barWidth = 80;
            const barSpacing = 40;
            const startX = 50;
            const maxHeight = 150;
            
            data.forEach((item, index) => {
                const x = startX + index * (barWidth + barSpacing);
                const height = (item.value / 100) * maxHeight;
                const y = canvas.height - height - 30;
                
                // ë°” ê·¸ë¦¬ê¸°
                ctx.fillStyle = item.color;
                ctx.fillRect(x, y, barWidth, height);
                
                // ë¼ë²¨ ê·¸ë¦¬ê¸°
                ctx.fillStyle = '#2c3e50';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(item.label, x + barWidth/2, canvas.height - 10);
                ctx.fillText(Math.round(item.value), x + barWidth/2, y - 5);
            });
        }

        // ë¡œë”© í‘œì‹œ
        function showLoading() {
            document.getElementById('totalScore').textContent = '...';
            document.getElementById('scoreGrade').textContent = 'í‰ê°€ ì¤‘';
        }

        // ë¡œë”© ìˆ¨ê¸°ê¸°
        function hideLoading() {
            // ë¡œë”© ìƒíƒœ í•´ì œëŠ” displayResultsì—ì„œ ì²˜ë¦¬ë¨
        }

        // í‰ê°€ ì´ˆê¸°í™”
        function resetEvaluation() {
            document.getElementById('evaluationData').value = '';
            document.getElementById('totalScore').textContent = '0';
            document.getElementById('scoreGrade').textContent = 'ë¯¸í‰ê°€';
            document.getElementById('scoreProgress').style.width = '0%';
            
            // ê°œë³„ ì ìˆ˜ ì´ˆê¸°í™”
            document.getElementById('quantScore').textContent = '0';
            document.getElementById('qualScore').textContent = '0';
            document.getElementById('contextScore').textContent = '0';
            document.getElementById('reliabilityScore').textContent = '0';
            
            // ë°ì´í„° í•­ëª© ì ìˆ˜ ì´ˆê¸°í™”
            evaluationModel.meaningfulDataItems.forEach(item => {
                document.getElementById(`score-${item.id}`).textContent = '0';
                document.getElementById(`progress-${item.id}`).style.width = '0%';
            });
            
            // ì¸ì‚¬ì´íŠ¸ íŒ¨ë„ ì´ˆê¸°í™”
            document.getElementById('insightsPanel').innerHTML = '<p>í‰ê°€ë¥¼ ì‹œì‘í•˜ë©´ ì¸ì‚¬ì´íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>';
        }

        // ê²°ê³¼ ë‚´ë³´ë‚´ê¸°
        function exportResults() {
            if (!currentResults) {
                alert('ë¨¼ì € í‰ê°€ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const exportData = {
                timestamp: new Date().toISOString(),
                totalScore: currentResults.totalScore,
                grade: currentResults.grade,
                categoryScores: {
                    quantitative: currentResults.quantitative,
                    qualitative: currentResults.qualitative,
                    contextual: currentResults.contextual
                },
                itemScores: currentResults.itemScores,
                reliability: currentResults.reliability,
                insights: currentResults.insights
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `evaluation_results_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ
        function loadSampleData() {
            const sampleData = `í™˜ìëª…: ê¹€ì² ìˆ˜
ì§„ë‹¨ëª…: ê¸‰ì„± ì‹¬ê·¼ê²½ìƒ‰ì¦
ì…ì›ê¸°ê°„: 2024-01-15 ~ 2024-01-25
ê²€ì‚¬ê²°ê³¼: ì‹¬ì „ë„ ì´ìƒ, ì‹¬ê·¼íš¨ì†Œ ìƒìŠ¹
ì¹˜ë£Œë‚´ìš©: ì‘ê¸‰ PCI ì‹œìˆ , ì•½ë¬¼ì¹˜ë£Œ
ê²½ê³¼: ì–‘í˜¸, í•©ë³‘ì¦ ì—†ìŒ`;
            
            document.getElementById('evaluationData').value = sampleData;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ
        setTimeout(loadSampleData, 1000);
    </script>
</body>
</html>