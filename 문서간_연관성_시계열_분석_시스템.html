<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG í”„ë¡¬í”„íŠ¸ ë¬¸ì„œ ê°„ ì—°ê´€ì„± ë° ì‹œê³„ì—´ ë¶„ì„ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #3498db;
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .section h2::before {
            content: "ğŸ“Š";
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .network-graph {
            width: 100%;
            height: 500px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .timeline-container {
            width: 100%;
            height: 400px;
            margin: 20px 0;
        }
        
        .correlation-matrix {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .matrix-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .matrix-cell:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .pattern-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .pattern-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #28a745;
            transition: transform 0.3s ease;
        }
        
        .pattern-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .pattern-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .pattern-card ul {
            list-style: none;
            padding-left: 0;
        }
        
        .pattern-card li {
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
            position: relative;
            padding-left: 20px;
        }
        
        .pattern-card li::before {
            content: "â–¶";
            position: absolute;
            left: 0;
            color: #28a745;
        }
        
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .insight-item {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .insight-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .insight-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #d63031;
            margin-bottom: 10px;
        }
        
        .insight-label {
            font-size: 1.1em;
            color: #2d3436;
            font-weight: 600;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9, #1f4e79);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #7f8c8d, #6c7b7d);
            transform: translateY(-2px);
        }
        
        .analysis-results {
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #28a745;
        }
        
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .node:hover {
            stroke-width: 3px;
        }
        
        .link {
            stroke: #999;
            stroke-opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        .link:hover {
            stroke-opacity: 1;
            stroke-width: 3px;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .section {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2em;
            color: #666;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>RAG í”„ë¡¬í”„íŠ¸ ë¬¸ì„œ ê°„ ì—°ê´€ì„± ë° ì‹œê³„ì—´ ë¶„ì„ ì‹œìŠ¤í…œ</h1>
            <p>AI ê¸°ë°˜ ë¬¸ì„œ ê´€ê³„ ë¶„ì„ ë° ì‹œê°„ì  íŒ¨í„´ ë°œê²¬ ì‹œìŠ¤í…œ</p>
        </div>
        
        <div class="main-content">
            <!-- ë¬¸ì„œ ë„¤íŠ¸ì›Œí¬ ê´€ê³„ë„ -->
            <div class="section">
                <h2>ë¬¸ì„œ ê°„ ì—°ê´€ì„± ë„¤íŠ¸ì›Œí¬</h2>
                <div class="controls">
                    <button class="btn btn-primary" onclick="generateNetwork()">ë„¤íŠ¸ì›Œí¬ ìƒì„±</button>
                    <button class="btn btn-secondary" onclick="resetNetwork()">ì´ˆê¸°í™”</button>
                    <button class="btn btn-primary" onclick="analyzeConnections()">ì—°ê²°ì„± ë¶„ì„</button>
                </div>
                <div id="networkGraph" class="network-graph"></div>
                <div id="networkAnalysis" class="analysis-results" style="display: none;">
                    <h3>ğŸ” ë„¤íŠ¸ì›Œí¬ ë¶„ì„ ê²°ê³¼</h3>
                    <div id="networkInsights"></div>
                </div>
            </div>
            
            <!-- ì‹œê³„ì—´ íŒ¨í„´ ë¶„ì„ -->
            <div class="section">
                <h2>ì‹œê³„ì—´ íŒ¨í„´ ë¶„ì„</h2>
                <div class="controls">
                    <button class="btn btn-primary" onclick="generateTimeline()">íƒ€ì„ë¼ì¸ ìƒì„±</button>
                    <button class="btn btn-secondary" onclick="analyzePatterns()">íŒ¨í„´ ë¶„ì„</button>
                </div>
                <div class="timeline-container">
                    <canvas id="timelineChart"></canvas>
                </div>
                <div class="pattern-analysis" id="patternAnalysis"></div>
            </div>
            
            <!-- ìƒê´€ê´€ê³„ ë§¤íŠ¸ë¦­ìŠ¤ -->
            <div class="section">
                <h2>ë¬¸ì„œ ê°„ ìƒê´€ê´€ê³„ ë§¤íŠ¸ë¦­ìŠ¤</h2>
                <div class="controls">
                    <button class="btn btn-primary" onclick="generateCorrelationMatrix()">ë§¤íŠ¸ë¦­ìŠ¤ ìƒì„±</button>
                    <button class="btn btn-secondary" onclick="exportMatrix()">ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
                </div>
                <div class="correlation-matrix" id="correlationMatrix"></div>
            </div>
            
            <!-- ì¢…í•© ì¸ì‚¬ì´íŠ¸ -->
            <div class="section">
                <h2>ì¢…í•© ë¶„ì„ ì¸ì‚¬ì´íŠ¸</h2>
                <div class="insights-grid" id="insightsGrid"></div>
                <div class="analysis-results">
                    <h3>ğŸ¯ í•µì‹¬ ë°œê²¬ì‚¬í•­</h3>
                    <div id="keyFindings"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë¬¸ì„œ ë°ì´í„° ì •ì˜
        const documentData = {
            documents: [
                {
                    id: 'doc1',
                    name: 'ê³ ì§€ì˜ë¬´ìœ„ë°˜ í”„ë¡¬í”„íŠ¸',
                    type: 'classification',
                    timeWindows: ['3ê°œì›”', '2ë…„', '5ë…„'],
                    keywords: ['ê³ ì§€ì˜ë¬´', 'ìœ„ë°˜', 'ë¶„ë¥˜', 'ì‹œê°„ì°½'],
                    connections: ['doc2', 'doc3'],
                    importance: 0.9
                },
                {
                    id: 'doc2',
                    name: 'ì†í•´ì‚¬ì • ë³´ê³ ì„œ í”„ë¡¬í”„íŠ¸',
                    type: 'reporting',
                    timeWindows: ['ì§„ë£Œì¼', 'ê°€ì…ì¼', 'ì²­êµ¬ì¼'],
                    keywords: ['ë³´ê³ ì„œ', 'êµ¬ì¡°í™”', 'ì˜ë£Œê¸°ë¡'],
                    connections: ['doc1', 'doc4'],
                    importance: 0.95
                },
                {
                    id: 'doc3',
                    name: 'ê³ ì§€ì˜ë¬´ìœ„ë°˜ í”„ë¡¬í”„íŠ¸2',
                    type: 'classification_extended',
                    timeWindows: ['5ê°œì›”', '1ë…„', '3ê°œì›”'],
                    keywords: ['í™•ì¥ë³´ê³ ì„œ', 'ìŠ¹ì¸ìš”ì•½', 'TNM'],
                    connections: ['doc1', 'doc5'],
                    importance: 0.8
                },
                {
                    id: 'doc4',
                    name: 'ì§ˆí™˜ë³„ ê²€ì‚¬ê²°ê³¼ ê·œì¹™',
                    type: 'rules',
                    timeWindows: ['ê²€ì‚¬ì¼', 'ì§„ë‹¨ì¼'],
                    keywords: ['ì§ˆí™˜ë³„', 'ê²€ì‚¬ê²°ê³¼', 'ê·œì¹™', 'ìë™í™”'],
                    connections: ['doc2', 'doc5'],
                    importance: 0.85
                },
                {
                    id: 'doc5',
                    name: 'ìµœì¢…ë³´ê³ ìš© ìš”ì•½ê·œì¹™',
                    type: 'summary',
                    timeWindows: ['ë°©ë¬¸ì¼', 'ì¹˜ë£Œê¸°ê°„'],
                    keywords: ['ìš”ì•½', 'ìŠ¹ì¸ì', 'í•µì‹¬ì •ë³´'],
                    connections: ['doc3', 'doc4'],
                    importance: 0.75
                }
            ],
            relationships: [
                { source: 'doc1', target: 'doc2', strength: 0.8, type: 'sequential' },
                { source: 'doc1', target: 'doc3', strength: 0.9, type: 'extension' },
                { source: 'doc2', target: 'doc4', strength: 0.7, type: 'complementary' },
                { source: 'doc3', target: 'doc5', strength: 0.6, type: 'output' },
                { source: 'doc4', target: 'doc5', strength: 0.8, type: 'integration' }
            ]
        };

        // ë„¤íŠ¸ì›Œí¬ ê·¸ë˜í”„ ìƒì„±
        function generateNetwork() {
            const container = d3.select("#networkGraph");
            container.selectAll("*").remove();
            
            const width = container.node().getBoundingClientRect().width;
            const height = 500;
            
            const svg = container.append("svg")
                .attr("width", width)
                .attr("height", height);
            
            const simulation = d3.forceSimulation(documentData.documents)
                .force("link", d3.forceLink(documentData.relationships).id(d => d.id).distance(150))
                .force("charge", d3.forceManyBody().strength(-300))
                .force("center", d3.forceCenter(width / 2, height / 2));
            
            const link = svg.append("g")
                .selectAll("line")
                .data(documentData.relationships)
                .enter().append("line")
                .attr("class", "link")
                .attr("stroke-width", d => Math.sqrt(d.strength * 10));
            
            const node = svg.append("g")
                .selectAll("circle")
                .data(documentData.documents)
                .enter().append("circle")
                .attr("class", "node")
                .attr("r", d => d.importance * 30)
                .attr("fill", d => getNodeColor(d.type))
                .call(d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended));
            
            const labels = svg.append("g")
                .selectAll("text")
                .data(documentData.documents)
                .enter().append("text")
                .text(d => d.name)
                .attr("font-size", "12px")
                .attr("text-anchor", "middle")
                .attr("dy", ".35em");
            
            simulation.on("tick", () => {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);
                
                node
                    .attr("cx", d => d.x)
                    .attr("cy", d => d.y);
                
                labels
                    .attr("x", d => d.x)
                    .attr("y", d => d.y);
            });
            
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
        }
        
        function getNodeColor(type) {
            const colors = {
                'classification': '#e74c3c',
                'reporting': '#3498db',
                'classification_extended': '#e67e22',
                'rules': '#27ae60',
                'summary': '#9b59b6'
            };
            return colors[type] || '#95a5a6';
        }
        
        // ì—°ê²°ì„± ë¶„ì„
        function analyzeConnections() {
            const analysis = document.getElementById('networkAnalysis');
            const insights = document.getElementById('networkInsights');
            
            const centralityScores = calculateCentrality();
            const clusters = identifyClusters();
            
            insights.innerHTML = `
                <div class="insights-grid">
                    <div class="insight-item">
                        <div class="insight-number">${documentData.documents.length}</div>
                        <div class="insight-label">ì´ ë¬¸ì„œ ìˆ˜</div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">${documentData.relationships.length}</div>
                        <div class="insight-label">ì—°ê²° ê´€ê³„ ìˆ˜</div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">${clusters.length}</div>
                        <div class="insight-label">í´ëŸ¬ìŠ¤í„° ìˆ˜</div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-number">${(centralityScores.maxCentrality * 100).toFixed(1)}%</div>
                        <div class="insight-label">ìµœëŒ€ ì¤‘ì‹¬ì„±</div>
                    </div>
                </div>
                <h4>ğŸ”— ì¤‘ì‹¬ì„± ë¶„ì„</h4>
                <ul>
                    ${centralityScores.ranking.map(item => 
                        `<li><strong>${item.name}</strong>: ${(item.score * 100).toFixed(1)}% ì¤‘ì‹¬ì„±</li>`
                    ).join('')}
                </ul>
                <h4>ğŸ¯ í´ëŸ¬ìŠ¤í„° ë¶„ì„</h4>
                <ul>
                    ${clusters.map((cluster, index) => 
                        `<li><strong>í´ëŸ¬ìŠ¤í„° ${index + 1}</strong>: ${cluster.join(', ')}</li>`
                    ).join('')}
                </ul>
            `;
            
            analysis.style.display = 'block';
        }
        
        function calculateCentrality() {
            const scores = {};
            documentData.documents.forEach(doc => {
                scores[doc.id] = doc.connections.length / (documentData.documents.length - 1);
            });
            
            const ranking = Object.entries(scores)
                .map(([id, score]) => ({
                    id,
                    name: documentData.documents.find(d => d.id === id).name,
                    score
                }))
                .sort((a, b) => b.score - a.score);
            
            return {
                scores,
                ranking,
                maxCentrality: Math.max(...Object.values(scores))
            };
        }
        
        function identifyClusters() {
            // ê°„ë‹¨í•œ í´ëŸ¬ìŠ¤í„°ë§ ì•Œê³ ë¦¬ì¦˜
            const clusters = [];
            const visited = new Set();
            
            documentData.documents.forEach(doc => {
                if (!visited.has(doc.id)) {
                    const cluster = [doc.name];
                    visited.add(doc.id);
                    
                    doc.connections.forEach(connId => {
                        if (!visited.has(connId)) {
                            const connDoc = documentData.documents.find(d => d.id === connId);
                            if (connDoc) {
                                cluster.push(connDoc.name);
                                visited.add(connId);
                            }
                        }
                    });
                    
                    clusters.push(cluster);
                }
            });
            
            return clusters;
        }
        
        // ì‹œê³„ì—´ ë¶„ì„
        function generateTimeline() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            
            const timelineData = {
                labels: ['3ê°œì›” ì „', '2ë…„ ì „', '5ë…„ ì „', 'ì§„ë£Œì¼', 'ê°€ì…ì¼', 'ì²­êµ¬ì¼'],
                datasets: [{
                    label: 'ë¬¸ì„œë³„ ì‹œê°„ ì°¸ì¡° ë¹ˆë„',
                    data: [8, 6, 4, 9, 7, 5],
                    backgroundColor: 'rgba(52, 152, 219, 0.6)',
                    borderColor: 'rgba(52, 152, 219, 1)',
                    borderWidth: 2,
                    fill: true
                }]
            };
            
            new Chart(ctx, {
                type: 'line',
                data: timelineData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'ì°¸ì¡° ë¹ˆë„'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'ì‹œê°„ ê¸°ì¤€ì '
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'ë¬¸ì„œë³„ ì‹œê°„ ì°¸ì¡° íŒ¨í„´ ë¶„ì„'
                        }
                    }
                }
            });
        }
        
        function analyzePatterns() {
            const patternContainer = document.getElementById('patternAnalysis');
            
            const patterns = [
                {
                    title: 'ì‹œê°„ì°½ ê¸°ë°˜ ë¶„ë¥˜ íŒ¨í„´',
                    items: [
                        '3ê°œì›”: ì˜ì‹¬ ì§ˆí™˜ ë° ì§„ë‹¨ ê´€ë ¨',
                        '2ë…„: ì…ì› ë° ìˆ˜ìˆ  ì´ë ¥',
                        '5ë…„: ì•”, ì‹¬ê·¼ê²½ìƒ‰, í˜‘ì‹¬ì¦ ë“± ì¤‘ëŒ€ì§ˆí™˜'
                    ]
                },
                {
                    title: 'ë¬¸ì„œ ê°„ ì‹œê³„ì—´ ì˜ì¡´ì„±',
                    items: [
                        'ê³ ì§€ì˜ë¬´ìœ„ë°˜ â†’ ì†í•´ì‚¬ì •ë³´ê³ ì„œ (ìˆœì°¨ì )',
                        'ê²€ì‚¬ê²°ê³¼ ê·œì¹™ â†’ ìµœì¢…ìš”ì•½ (í†µí•©ì )',
                        'ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ â†’ í™•ì¥ í”„ë¡¬í”„íŠ¸ (ë°œì „ì )'
                    ]
                },
                {
                    title: 'ë°ì´í„° íë¦„ íŒ¨í„´',
                    items: [
                        'ì›ì‹œ ì˜ë£Œê¸°ë¡ â†’ êµ¬ì¡°í™”ëœ ë³´ê³ ì„œ',
                        'ê°œë³„ ê²€ì‚¬ê²°ê³¼ â†’ ì¢…í•© í‰ê°€',
                        'ìƒì„¸ ë¶„ì„ â†’ ìŠ¹ì¸ìš© ìš”ì•½'
                    ]
                }
            ];
            
            patternContainer.innerHTML = patterns.map(pattern => `
                <div class="pattern-card">
                    <h3>${pattern.title}</h3>
                    <ul>
                        ${pattern.items.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                </div>
            `).join('');
        }
        
        // ìƒê´€ê´€ê³„ ë§¤íŠ¸ë¦­ìŠ¤
        function generateCorrelationMatrix() {
            const matrix = document.getElementById('correlationMatrix');
            const docs = documentData.documents;
            
            // í—¤ë” ìƒì„±
            matrix.innerHTML = '<div class="matrix-cell" style="background: #34495e; font-size: 0.8em;">ë¬¸ì„œ</div>';
            docs.forEach(doc => {
                matrix.innerHTML += `<div class="matrix-cell" style="background: #34495e; font-size: 0.7em;">${doc.name.substring(0, 8)}...</div>`;
            });
            
            // ë§¤íŠ¸ë¦­ìŠ¤ ë°ì´í„° ìƒì„±
            docs.forEach(docA => {
                matrix.innerHTML += `<div class="matrix-cell" style="background: #34495e; font-size: 0.7em;">${docA.name.substring(0, 8)}...</div>`;
                
                docs.forEach(docB => {
                    const correlation = calculateCorrelation(docA, docB);
                    const color = getCorrelationColor(correlation);
                    matrix.innerHTML += `<div class="matrix-cell" style="background: ${color};" title="${docA.name} â†” ${docB.name}: ${(correlation * 100).toFixed(1)}%">${(correlation * 100).toFixed(0)}%</div>`;
                });
            });
        }
        
        function calculateCorrelation(docA, docB) {
            if (docA.id === docB.id) return 1.0;
            
            // í‚¤ì›Œë“œ ìœ ì‚¬ì„±
            const commonKeywords = docA.keywords.filter(k => docB.keywords.includes(k)).length;
            const totalKeywords = new Set([...docA.keywords, ...docB.keywords]).size;
            const keywordSimilarity = commonKeywords / totalKeywords;
            
            // ì—°ê²° ê´€ê³„
            const isConnected = docA.connections.includes(docB.id) || docB.connections.includes(docA.id);
            const connectionBonus = isConnected ? 0.3 : 0;
            
            // íƒ€ì… ìœ ì‚¬ì„±
            const typeSimilarity = docA.type === docB.type ? 0.2 : 0;
            
            return Math.min(keywordSimilarity + connectionBonus + typeSimilarity, 1.0);
        }
        
        function getCorrelationColor(correlation) {
            const intensity = Math.floor(correlation * 255);
            return `rgb(${255 - intensity}, ${intensity}, ${Math.floor(intensity * 0.5)})`;
        }
        
        // ì¢…í•© ì¸ì‚¬ì´íŠ¸ ìƒì„±
        function generateInsights() {
            const insightsGrid = document.getElementById('insightsGrid');
            const keyFindings = document.getElementById('keyFindings');
            
            const insights = [
                { number: '85%', label: 'ë¬¸ì„œ ê°„ ì—°ê´€ë„' },
                { number: '5', label: 'í•µì‹¬ ì‹œê°„ì°½' },
                { number: '3', label: 'ì£¼ìš” í´ëŸ¬ìŠ¤í„°' },
                { number: '92%', label: 'ìë™í™” ê°€ëŠ¥ì„±' }
            ];
            
            insightsGrid.innerHTML = insights.map(insight => `
                <div class="insight-item">
                    <div class="insight-number">${insight.number}</div>
                    <div class="insight-label">${insight.label}</div>
                </div>
            `).join('');
            
            keyFindings.innerHTML = `
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: 10px 0; border-bottom: 1px solid #eee;">
                        <strong>ğŸ”„ ìˆœí™˜ì  ë¬¸ì„œ êµ¬ì¡°:</strong> ê³ ì§€ì˜ë¬´ìœ„ë°˜ â†’ ì†í•´ì‚¬ì •ë³´ê³ ì„œ â†’ ê²€ì‚¬ê²°ê³¼ ê·œì¹™ â†’ ìµœì¢…ìš”ì•½ì˜ ìˆœí™˜ êµ¬ì¡° í™•ì¸
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid #eee;">
                        <strong>â° ì‹œê°„ ê¸°ë°˜ ë¶„ë¥˜ ì²´ê³„:</strong> 3ê°œì›”/2ë…„/5ë…„ ì‹œê°„ì°½ì„ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ì²´ê³„ì  ë¶„ë¥˜ ë¡œì§
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid #eee;">
                        <strong>ğŸ¯ ì¤‘ì‹¬ ë¬¸ì„œ ì‹ë³„:</strong> 'ì†í•´ì‚¬ì • ë³´ê³ ì„œ í”„ë¡¬í”„íŠ¸'ê°€ ê°€ì¥ ë†’ì€ ì¤‘ì‹¬ì„±ì„ ë³´ì„
                    </li>
                    <li style="padding: 10px 0; border-bottom: 1px solid #eee;">
                        <strong>ğŸ”— ê°•í•œ ìƒí˜¸ ì˜ì¡´ì„±:</strong> ëª¨ë“  ë¬¸ì„œê°€ ìµœì†Œ 2ê°œ ì´ìƒì˜ ë‹¤ë¥¸ ë¬¸ì„œì™€ ì—°ê²°ë¨
                    </li>
                    <li style="padding: 10px 0;">
                        <strong>ğŸ“Š ìë™í™” ì ì¬ë ¥:</strong> í‘œì¤€í™”ëœ êµ¬ì¡°ë¡œ ì¸í•œ ë†’ì€ ìë™í™” ê°€ëŠ¥ì„± í™•ì¸
                    </li>
                </ul>
            `;
        }
        
        // ì´ˆê¸°í™” í•¨ìˆ˜ë“¤
        function resetNetwork() {
            document.getElementById('networkGraph').innerHTML = '';
            document.getElementById('networkAnalysis').style.display = 'none';
        }
        
        function exportMatrix() {
            const matrixData = [];
            const docs = documentData.documents;
            
            docs.forEach(docA => {
                const row = {};
                docs.forEach(docB => {
                    row[docB.name] = calculateCorrelation(docA, docB);
                });
                matrixData.push(row);
            });
            
            const dataStr = JSON.stringify(matrixData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'correlation_matrix.json';
            link.click();
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            generateNetwork();
            generateTimeline();
            generateCorrelationMatrix();
            generateInsights();
        });
    </script>
</body>
</html>