## 목표
- 품질지표 자동화(정규화율·바인딩 지표·형식 동등성)와 파라미터 튜닝로 안정성 향상
- 컨트롤러 경로의 점진 롤아웃(기능 플래그 기반)

## 지표 자동화
- 날짜 정규화 성공률: 케이스별 후보 대비 ISO 유효 변환 비율 집계
- 바인딩 지표(휴리스틱): 입원/수술/조직/영상 키워드 기반 슬롯 채움율·태그 적중률
- 형식 동등성: JSON/MD/HTML 스키마 비교(기존 diff 스크립트 활용) 결과 집계
- 성능: 처리시간·이벤트 수·score 분포·relEdges 밀도
- 산출: outputs/ten-report/_metrics.json 및 _metrics.md(요약 테이블)

## 골든 출력
- 대표 케이스(offline_ocr 5개·blocks 5개) 골든 저장
- 배치 재실행 후 report-diff로 변화 비교·회귀 감시

## 파라미터 튜닝
- Date Binding 반경·테이블 감지 임계값·키워드 스코어 가중 외부화(shared/constants)
- 환경 오버라이드(.env 또는 process.env)로 운영 조정
- 튜닝 루프: 지표 개선 방향(정규화↑·바인딩↑·오탐↓)에 따라 값 조정

## 태그 품질 강화
- RAG 사전(검사 약어/ICD/KCD) 병합·동의어 정규화
- 태그 추출 시 사전 우선, 룰 폴백 혼합

## 컨트롤러 롤아웃
- 기능 플래그로 tenItemReport 기본값 OFF 유지→지표 충족 시 ON
- 로깅 메타(하이브리드 여부·가중치·relEdges) Optional 포함
- 실패 시 기존 경로 자동 폴백

## 문서·테스트
- 운영 가이드(SPEC/ARCH) 갱신 및 샘플 CLI 사용법 추가
- vitest 서브셋(CI)로 핵심 테스트 통과 확인

## 실행 순서
1) 지표 수집 스크립트 추가→샘플 10건 측정
2) 골든 저장→배치 후 diff 비교
3) 파라미터 외부화→튜닝 루프 2회
4) 태그 사전 병합→재측정→컨트롤러 플래그 상태 유지 보고

## 산출물
- _metrics.json/_metrics.md, 골든 세트, 외부화된 파라미터 상수, 업데이트 문서

## 위험·대응
- 포맷 다양성/인코딩 혼재: 로더 폴백 유지·실패 라벨링
- 성능: 배치·캐시·파라미터로 튜닝
- 회귀: 골든 diff로 즉시 탐지