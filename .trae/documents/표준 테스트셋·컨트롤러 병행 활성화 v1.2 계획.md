## 목표
- 표준 테스트셋(≥30 PDF)로 날짜 바인딩·이벤트 패킹·10항목 보고서·스코어링/연관성 정확도 검증
- reportController에 10항목 생성기 경로를 옵션 기반으로 병행 활성화(기존 동작 유지)

## 범위·원칙
- 업로드·OCR·텍스트추출·UI 미변경
- 보고서 출력(JSON/Markdown/HTML) 동등 스키마 유지
- 판단 금지, 근거/확인요망 중심, 좌표 활용 우선 + 텍스트 Fallback

## 표준 테스트셋 구축
- 케이스 선정: 입원/수술/조직검사/영상검사 포함 30개 이상
- 입력 아티팩트 구성: 날짜 bbox·텍스트 블록·옵션(contractDate/claimKeywords) JSON
- 골든 출력: Event JSON v1 + 10항목 보고서(JSON/MD/HTML)
- 저장 규칙: /tests/data/{caseId}/input.json, /tests/golden/{caseId}/{report.*}

## 측정 스크립트
- 날짜 정규화 성공률(99% 목표): 다양한 형식 파싱률
- 날짜→이벤트 바인딩 정확도(95% 목표): 핵심 이벤트(입원/수술/조직/영상)
- 10항목 누락률: ‘미기재’ 처리 확인, 필수 슬롯 출력 보장
- 형식 동등성: JSON/MD/HTML 동일 스키마 비교(report-diff 활용)
- 성능: 처리시간/메모리/핫 경로(정규화·클러스터링) 수집

## 컨트롤러 병행 활성화
- reportController에 기능 플래그/옵션 추가: tenItemReport=true 시 신규 생성기 사용
- 라우트/출력 경로 기존 유지, 신규 결과는 outputs/{jobId}/report.*
- 로깅에 hybridProcessing/weights/relEdges 메타 포함(Full Report 시 optional)

## RAG 운영 강화
- 파일 캐시 유지 + SQL/벡터 인덱스 설계 초안
- 조회 순서: 로컬→웹 1회→적재(출처/날짜/신뢰도) 및 재시도/오류 로깅
- 영문/한글 병기 의무 충족 여부 검증(부족 시 ‘확인요망’)

## 위험·대응
- 좌표 품질 변동: 텍스트 Fallback·반경/클러스터 파라미터 튜닝
- 성능 저하: 캐시·배치·큐, 임계값 외부화로 운영 조정
- 데이터 표준화 미흡: RAG 누적·사전 확장

## 산출물
- 테스트 데이터셋·측정 스크립트·골든 출력·diff 리포트
- 컨트롤러 옵션 경로·로깅 메타
- 운영 문서: SPEC/ARCHITECTURE/PR_CHECKLIST 업데이트(“Vision only”)

## 롤아웃
- 샘플 10건 → 표준 30건 → 전체 전개
- 측정 기준 충족 시 기능 플래그 ON, 회귀 발생 시 OFF