<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§¬ğŸ–¼ï¸ğŸ“… MediAI Task 01~03 í†µí•© ê²€ì¦</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .task-indicators {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .task-indicator {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            padding: 30px;
        }

        .input-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }

        .results-section {
            display: grid;
            grid-template-rows: auto auto auto;
            gap: 20px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-area {
            width: 100%;
            height: 350px;
            border: 2px dashed #e9ecef;
            border-radius: 10px;
            padding: 20px;
            font-size: 14px;
            font-family: 'Consolas', monospace;
            resize: vertical;
            transition: border-color 0.3s;
        }

        .input-area:focus {
            border-color: #667eea;
            outline: none;
        }

        .analyze-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .result-panel {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            height: 280px;
            overflow-y: auto;
        }

        .dna-panel {
            border-left: 4px solid #28a745;
        }

        .layout-panel {
            border-left: 4px solid #007bff;
        }

        .date-panel {
            border-left: 4px solid #ffc107;
        }

        .gene-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #28a745;
            transition: all 0.3s;
        }

        .gene-card:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .gene-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .gene-id {
            font-weight: 600;
            color: #495057;
        }

        .confidence-badge {
            background: #28a745;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .enhancement-badges {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .enhancement-badge {
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .layout-enhanced {
            background: #007bff;
            color: white;
        }

        .date-enhanced {
            background: #ffc107;
            color: #495057;
        }

        .gene-content {
            color: #6c757d;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .anchors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
        }

        .anchor {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .anchor-icon {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .temporal { background-color: #007bff; }
        .spatial { background-color: #28a745; }
        .medical { background-color: #dc3545; }
        .causal { background-color: #ffc107; }

        .temporal-context {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 3px solid #ffc107;
        }

        .temporal-detail {
            font-size: 0.85rem;
            color: #856404;
            margin: 2px 0;
        }

        .date-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #ffc107;
        }

        .date-timeline {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .timeline-date {
            font-weight: 600;
            color: #495057;
            min-width: 100px;
        }

        .timeline-event {
            color: #6c757d;
            flex: 1;
        }

        .timeline-confidence {
            background: #ffc107;
            color: #495057;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .layout-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: #007bff;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 5px;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #6c757d;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #e9ecef;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status-bar {
            background: #f8f9fa;
            padding: 15px 30px;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-text {
            color: #6c757d;
        }

        .processing-time {
            font-weight: 600;
            color: #495057;
        }

        .integration-metrics {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .metric-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .metric-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .success { background-color: #28a745; }
        .warning { background-color: #ffc107; }
        .error { background-color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§¬ğŸ–¼ï¸ğŸ“… MediAI Task 01~03 í†µí•© ê²€ì¦</h1>
            <p>DNA ì‹œí€€ì‹± + ë ˆì´ì•„ì›ƒ ë³µì› + ì¤‘ì²© ë‚ ì§œ í•´ê²°ì˜ ì™„ì „ í†µí•© ì‹œìŠ¤í…œ</p>
            
            <div class="task-indicators">
                <div class="task-indicator">
                    <span>ğŸ§¬</span>
                    <span>Task 01: DNA ì‹œí€€ì‹±</span>
                </div>
                <div class="task-indicator">
                    <span>ğŸ–¼ï¸</span>
                    <span>Task 02: ë ˆì´ì•„ì›ƒ ë³µì›</span>
                </div>
                <div class="task-indicator">
                    <span>ğŸ“…</span>
                    <span>Task 03: ë‚ ì§œ í•´ê²°</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="input-section">
                <div class="section-title">
                    ğŸ“ ë³µí•© ì˜ë£Œ í…ìŠ¤íŠ¸ ì…ë ¥
                </div>
                <textarea 
                    id="medicalText" 
                    class="input-area" 
                    placeholder="ë³µì¡í•œ ì‹œê°„ì  í‘œí˜„ì´ í¬í•¨ëœ ì˜ë£Œ ë¬¸ì„œë¥¼ ì…ë ¥í•˜ì„¸ìš”...&#10;&#10;ì˜ˆì‹œ:&#10;í™˜ìëª…: ë°•ë¯¼ìˆ˜ (M/52)&#10;&#10;2023ë…„ 3ì›”ë¶€í„° ë‹¹ë‡¨ë³‘ìœ¼ë¡œ ë©”íŠ¸í¬ë¥´ë¯¼ ë³µìš© ì¤‘&#10;ìµœê·¼ í˜ˆë‹¹ ì¡°ì ˆ ë¶ˆëŸ‰ìœ¼ë¡œ ê¸ˆì¼ ì‘ê¸‰ì‹¤ ë‚´ì›&#10;&#10;ê³¼ê±°ë ¥: 2020ë…„ ê³ í˜ˆì•• ì§„ë‹¨&#10;í˜„ë³‘ë ¥: 3ê°œì›” ì „ë¶€í„° ë‹¤ìŒ, ë‹¤ë‡¨ ì¦ìƒ&#10;&#10;ê¸ˆì¼ ê²€ì‚¬:&#10;- ê³µë³µí˜ˆë‹¹: 280mg/dl â†‘&#10;- HbA1c: 9.2% â†‘&#10;- í˜ˆì••: 160/95 mmHg&#10;&#10;ì§„ë‹¨: ì œ2í˜• ë‹¹ë‡¨ë³‘ ê¸‰ì„± ì•…í™”&#10;ì²˜ë°©: ì¸ìŠë¦° ìš”ë²• ì‹œì‘&#10;ì¶”ì : 1ì£¼ì¼ í›„ ì™¸ë˜"
                >í™˜ìëª…: ë°•ë¯¼ìˆ˜ (M/52)
ë³‘ì›: ì„œìš¸ëŒ€í•™êµë³‘ì› ë‚´ë¶„ë¹„ë‚´ê³¼

2023ë…„ 3ì›”ë¶€í„° ë‹¹ë‡¨ë³‘ìœ¼ë¡œ ë©”íŠ¸í¬ë¥´ë¯¼ ë³µìš© ì¤‘
ìµœê·¼ í˜ˆë‹¹ ì¡°ì ˆ ë¶ˆëŸ‰ìœ¼ë¡œ ê¸ˆì¼ ì‘ê¸‰ì‹¤ ë‚´ì›

ê³¼ê±°ë ¥:
- 2020ë…„ ê³ í˜ˆì•• ì§„ë‹¨ í›„ ì•”ë¡œë””í•€ ë³µìš©
- 2022ë…„ ì´ìƒì§€ì§ˆí˜ˆì¦ ì§„ë‹¨

í˜„ë³‘ë ¥:
- 3ê°œì›” ì „ë¶€í„° ë‹¤ìŒ, ë‹¤ë‡¨, ì²´ì¤‘ê°ì†Œ ì¦ìƒ
- 1ì£¼ì¼ ì „ë¶€í„° í”¼ë¡œê° ì‹¬í™”
- ì–´ì œ ë°¤ë¶€í„° êµ¬í†  ì¦ìƒ

ê¸ˆì¼ ê²€ì‚¬ ê²°ê³¼:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ê²€ì‚¬í•­ëª©    â”‚   ê²°ê³¼    â”‚  ì°¸ê³ ì¹˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ê³µë³µí˜ˆë‹¹      â”‚ 280mg/dl  â”‚ 70-100 â”‚
â”‚  HbA1c        â”‚   9.2%    â”‚  <7.0  â”‚
â”‚  í˜ˆì••          â”‚ 160/95    â”‚ <140/90â”‚
â”‚  ì¼€í†¤ì²´        â”‚   ì–‘ì„±    â”‚  ìŒì„±   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì§„ë‹¨:
1) ì œ2í˜• ë‹¹ë‡¨ë³‘ ê¸‰ì„± ì•…í™” (E11.9)
2) ë‹¹ë‡¨ë³‘ì„± ì¼€í†¤ì‚°ì¦ ì˜ì‹¬

ì²˜ë°©:
1) ì¸ìŠë¦° ìš”ë²• ì‹œì‘ (íœ´ë¨¼ë¡œê·¸ 10U tid)
2) ë©”íŠ¸í¬ë¥´ë¯¼ ì¦ëŸ‰ (1000mg bid â†’ 1500mg bid)
3) ìˆ˜ì•¡ ìš”ë²•

ê³„íš:
- 3ì¼ê°„ ì…ì› ì¹˜ë£Œ
- 1ì£¼ì¼ í›„ ì™¸ë˜ ì¶”ì 
- ë‹¹ë‡¨ êµìœ¡ ì˜ë¢°</textarea>
                
                <button id="analyzeBtn" class="analyze-btn">
                    ğŸ§¬ğŸ–¼ï¸ğŸ“… ì™„ì „ í†µí•© ë¶„ì„ ì‹œì‘
                </button>
            </div>

            <div class="results-section">
                <div class="result-panel dna-panel">
                    <div class="section-title">
                        ğŸ§¬ DNA ì‹œí€€ì‹± ê²°ê³¼
                        <div id="dnaEnhancements" class="enhancement-badges" style="display: none;">
                            <span class="enhancement-badge layout-enhanced">Layout Enhanced</span>
                            <span class="enhancement-badge date-enhanced">Date Enhanced</span>
                        </div>
                    </div>
                    <div id="dnaResults">
                        <div class="loading">
                            <span>ë¶„ì„ ì‹œì‘ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</span>
                        </div>
                    </div>
                </div>

                <div class="result-panel layout-panel">
                    <div class="section-title">
                        ğŸ–¼ï¸ ë ˆì´ì•„ì›ƒ ë³µì› ê²°ê³¼
                    </div>
                    <div id="layoutResults">
                        <div class="loading">
                            <span>ë¶„ì„ ì‹œì‘ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</span>
                        </div>
                    </div>
                </div>

                <div class="result-panel date-panel">
                    <div class="section-title">
                        ğŸ“… ì¤‘ì²© ë‚ ì§œ í•´ê²° ê²°ê³¼
                    </div>
                    <div id="dateResults">
                        <div class="loading">
                            <span>ë¶„ì„ ì‹œì‘ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-text" id="statusText">
                ì¤€ë¹„ë¨ - Task 01~03 í†µí•© ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”
            </div>
            <div class="integration-metrics" id="integrationMetrics" style="display: none;">
                <div class="metric-item">
                    <span class="metric-icon success"></span>
                    <span>Layout Enhanced</span>
                </div>
                <div class="metric-item">
                    <span class="metric-icon success"></span>
                    <span>Date Enhanced</span>
                </div>
            </div>
            <div class="processing-time" id="processingTime">
                ì²˜ë¦¬ ì‹œê°„: -
            </div>
        </div>
    </div>

    <script>
        const analyzeBtn = document.getElementById('analyzeBtn');
        const medicalText = document.getElementById('medicalText');
        const dnaResults = document.getElementById('dnaResults');
        const layoutResults = document.getElementById('layoutResults');
        const dateResults = document.getElementById('dateResults');
        const statusText = document.getElementById('statusText');
        const processingTime = document.getElementById('processingTime');
        const dnaEnhancements = document.getElementById('dnaEnhancements');
        const integrationMetrics = document.getElementById('integrationMetrics');

        analyzeBtn.addEventListener('click', async () => {
            const text = medicalText.value.trim();
            if (!text) {
                alert('ì˜ë£Œ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // UI ìƒíƒœ ë³€ê²½
            analyzeBtn.disabled = true;
            analyzeBtn.textContent = 'ğŸ§¬ğŸ–¼ï¸ğŸ“… í†µí•© ë¶„ì„ ì§„í–‰ ì¤‘...';
            statusText.textContent = 'Task 01~03 í†µí•© ë¶„ì„ ì‹¤í–‰ ì¤‘...';
            
            // ë¡œë”© ìƒíƒœ í‘œì‹œ
            dnaResults.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <span>DNA ì‹œí€€ì‹± ì§„í–‰ ì¤‘...</span>
                </div>
            `;
            
            layoutResults.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <span>ë ˆì´ì•„ì›ƒ ë³µì› ì§„í–‰ ì¤‘...</span>
                </div>
            `;

            dateResults.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <span>ì¤‘ì²© ë‚ ì§œ í•´ê²° ì§„í–‰ ì¤‘...</span>
                </div>
            `;

            try {
                const startTime = Date.now();
                
                // ì‹¤ì œ í†µí•© ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜
                const result = await simulateFullIntegratedAnalysis(text);
                
                const endTime = Date.now();
                const processingTimeMs = endTime - startTime;

                // ê²°ê³¼ í‘œì‹œ
                displayDNAResults(result.dna);
                displayLayoutResults(result.layout);
                displayDateResults(result.date);
                
                // Enhancement ì§€ì‹œì ì—…ë°ì´íŠ¸
                if (result.dna.layoutEnhanced || result.dna.dateEnhanced) {
                    dnaEnhancements.style.display = 'flex';
                    integrationMetrics.style.display = 'flex';
                }

                statusText.textContent = `ì™„ì „ í†µí•© ë¶„ì„ ì™„ë£Œ - DNA ${result.dna.genes.length}ê°œ, Layout ${result.layout.spatialGroups}ê°œ, Date ${result.date.totalDates}ê°œ`;
                processingTime.textContent = `ì²˜ë¦¬ ì‹œê°„: ${processingTimeMs}ms`;

            } catch (error) {
                console.error('ë¶„ì„ ì¤‘ ì˜¤ë¥˜:', error);
                dnaResults.innerHTML = `<div style="color: red;">DNA ë¶„ì„ ì‹¤íŒ¨: ${error.message}</div>`;
                layoutResults.innerHTML = `<div style="color: red;">Layout ë¶„ì„ ì‹¤íŒ¨: ${error.message}</div>`;
                dateResults.innerHTML = `<div style="color: red;">Date ë¶„ì„ ì‹¤íŒ¨: ${error.message}</div>`;
                statusText.textContent = 'ë¶„ì„ ì‹¤íŒ¨';
            } finally {
                analyzeBtn.disabled = false;
                analyzeBtn.textContent = 'ğŸ§¬ğŸ–¼ï¸ğŸ“… ì™„ì „ í†µí•© ë¶„ì„ ì‹œì‘';
            }
        });

        async function simulateFullIntegratedAnalysis(text) {
            // ë‹¨ê³„ë³„ ì‹œë®¬ë ˆì´ì…˜
            await new Promise(resolve => setTimeout(resolve, 1200)); // Layout ë³µì›
            await new Promise(resolve => setTimeout(resolve, 800));  // Date í•´ê²°
            await new Promise(resolve => setTimeout(resolve, 1000)); // DNA ì‹œí€€ì‹±
            
            return {
                dna: {
                    genes: [
                        {
                            id: 'gene_001',
                            content: '2023ë…„ 3ì›”ë¶€í„° ë‹¹ë‡¨ë³‘ìœ¼ë¡œ ë©”íŠ¸í¬ë¥´ë¯¼ ë³µìš©',
                            confidence: 0.94,
                            anchors: {
                                temporal: '2023-03',
                                spatial: 'ì„œìš¸ëŒ€í•™êµë³‘ì›',
                                medical: 'ë‹¹ë‡¨ë³‘ ì¹˜ë£Œ',
                                causal: 'í˜ˆë‹¹ ì¡°ì ˆ'
                            },
                            layout: {
                                position: 'main',
                                section: 'medication_history',
                                visualImportance: 0.9
                            },
                            temporalContext: {
                                originalExpression: '2023ë…„ 3ì›”ë¶€í„°',
                                normalizedDate: '2023-03-01',
                                resolutionMethod: 'direct',
                                medicalContext: 'medication',
                                clinicalSignificance: 0.9
                            },
                            dateEnhanced: true,
                            layoutEnhanced: true
                        },
                        {
                            id: 'gene_002',
                            content: 'ê¸ˆì¼ ì‘ê¸‰ì‹¤ ë‚´ì› - í˜ˆë‹¹ ì¡°ì ˆ ë¶ˆëŸ‰',
                            confidence: 0.97,
                            anchors: {
                                temporal: 'ê¸ˆì¼',
                                spatial: 'ì‘ê¸‰ì‹¤',
                                medical: 'ì‘ê¸‰ ë‚´ì›',
                                causal: 'í˜ˆë‹¹ ì¡°ì ˆ ë¶ˆëŸ‰'
                            },
                            layout: {
                                position: 'main',
                                section: 'chief_complaint',
                                visualImportance: 0.95
                            },
                            temporalContext: {
                                originalExpression: 'ê¸ˆì¼',
                                normalizedDate: '2024-01-18',
                                resolutionMethod: 'relative',
                                medicalContext: 'examination',
                                clinicalSignificance: 1.0
                            },
                            dateEnhanced: true,
                            layoutEnhanced: true
                        },
                        {
                            id: 'gene_003',
                            content: '2020ë…„ ê³ í˜ˆì•• ì§„ë‹¨ í›„ ì•”ë¡œë””í•€ ë³µìš©',
                            confidence: 0.92,
                            anchors: {
                                temporal: '2020ë…„',
                                medical: 'ê³ í˜ˆì•• ì§„ë‹¨',
                                causal: 'ê³¼ê±° ë³‘ë ¥'
                            },
                            layout: {
                                position: 'main',
                                section: 'past_history',
                                visualImportance: 0.7
                            },
                            temporalContext: {
                                originalExpression: '2020ë…„',
                                normalizedDate: '2020-01-01',
                                resolutionMethod: 'direct',
                                medicalContext: 'diagnosis',
                                clinicalSignificance: 0.8
                            },
                            dateEnhanced: true,
                            layoutEnhanced: true
                        },
                        {
                            id: 'gene_004',
                            content: '3ê°œì›” ì „ë¶€í„° ë‹¤ìŒ, ë‹¤ë‡¨, ì²´ì¤‘ê°ì†Œ',
                            confidence: 0.89,
                            anchors: {
                                temporal: '3ê°œì›” ì „',
                                medical: 'ë‹¹ë‡¨ ì¦ìƒ',
                                causal: 'ì¦ìƒ ë°œí˜„'
                            },
                            layout: {
                                position: 'main',
                                section: 'present_illness',
                                visualImportance: 0.85
                            },
                            temporalContext: {
                                originalExpression: '3ê°œì›” ì „ë¶€í„°',
                                normalizedDate: '2023-10-18',
                                resolutionMethod: 'relative',
                                medicalContext: 'symptom',
                                clinicalSignificance: 0.9
                            },
                            dateEnhanced: true,
                            layoutEnhanced: true
                        },
                        {
                            id: 'gene_005',
                            content: 'ê³µë³µí˜ˆë‹¹ 280mg/dl, HbA1c 9.2%',
                            confidence: 0.98,
                            anchors: {
                                temporal: 'ê¸ˆì¼',
                                medical: 'í˜ˆë‹¹ ê²€ì‚¬',
                                causal: 'ë‹¹ë‡¨ í‰ê°€'
                            },
                            layout: {
                                position: 'table',
                                section: 'lab_results',
                                visualImportance: 1.0
                            },
                            temporalContext: {
                                originalExpression: 'ê¸ˆì¼ ê²€ì‚¬',
                                normalizedDate: '2024-01-18',
                                resolutionMethod: 'contextual',
                                medicalContext: 'examination',
                                clinicalSignificance: 1.0
                            },
                            dateEnhanced: true,
                            layoutEnhanced: true
                        },
                        {
                            id: 'gene_006',
                            content: '1ì£¼ì¼ í›„ ì™¸ë˜ ì¶”ì ',
                            confidence: 0.86,
                            anchors: {
                                temporal: '1ì£¼ì¼ í›„',
                                medical: 'ì¶”ì ê´€ì°°',
                                causal: 'ì¹˜ë£Œ íš¨ê³¼ í‰ê°€'
                            },
                            layout: {
                                position: 'footer',
                                section: 'follow_up',
                                visualImportance: 0.8
                            },
                            temporalContext: {
                                originalExpression: '1ì£¼ì¼ í›„',
                                normalizedDate: '2024-01-25',
                                resolutionMethod: 'relative',
                                medicalContext: 'follow_up',
                                clinicalSignificance: 0.8
                            },
                            dateEnhanced: true,
                            layoutEnhanced: true
                        }
                    ],
                    averageConfidence: 0.93,
                    layoutEnhanced: true,
                    dateEnhanced: true,
                    stats: {
                        totalGenes: 6,
                        processingTime: 2156
                    }
                },
                layout: {
                    spatialGroups: 8,
                    documentStructure: {
                        header: { type: 'patient_info', confidence: 0.95 },
                        sections: [
                            { type: 'past_history', confidence: 0.88 },
                            { type: 'present_illness', confidence: 0.92 },
                            { type: 'lab_results', confidence: 0.98 },
                            { type: 'diagnosis', confidence: 0.96 },
                            { type: 'prescription', confidence: 0.89 },
                            { type: 'follow_up', confidence: 0.85 }
                        ]
                    },
                    structuredElements: {
                        tables: 1,
                        lists: 3,
                        keyValuePairs: 6
                    },
                    accuracy: 0.92,
                    confidence: 0.89,
                    coverage: 0.96
                },
                date: {
                    totalDates: 8,
                    resolvedDates: [
                        {
                            original: '2023ë…„ 3ì›”ë¶€í„°',
                            normalized: '2023-03-01',
                            type: 'duration',
                            confidence: 0.95,
                            medicalContext: 'medication'
                        },
                        {
                            original: 'ê¸ˆì¼',
                            normalized: '2024-01-18',
                            type: 'relative',
                            confidence: 0.9,
                            medicalContext: 'examination'
                        },
                        {
                            original: '2020ë…„',
                            normalized: '2020-01-01',
                            type: 'absolute',
                            confidence: 0.98,
                            medicalContext: 'diagnosis'
                        },
                        {
                            original: '3ê°œì›” ì „ë¶€í„°',
                            normalized: '2023-10-18',
                            type: 'relative',
                            confidence: 0.85,
                            medicalContext: 'symptom'
                        },
                        {
                            original: '1ì£¼ì¼ í›„',
                            normalized: '2024-01-25',
                            type: 'relative',
                            confidence: 0.88,
                            medicalContext: 'follow_up'
                        }
                    ],
                    ambiguousResolved: { original: 3, resolved: 3 },
                    conflictsResolved: { total: 2, conflicts: 0 },
                    confidenceScore: 0.91,
                    timeline: [
                        { date: '2020-01-01', event: 'ê³ í˜ˆì•• ì§„ë‹¨', context: 'diagnosis' },
                        { date: '2023-03-01', event: 'ë‹¹ë‡¨ë³‘ ì¹˜ë£Œ ì‹œì‘', context: 'medication' },
                        { date: '2023-10-18', event: 'ë‹¹ë‡¨ ì¦ìƒ ë°œí˜„', context: 'symptom' },
                        { date: '2024-01-18', event: 'ì‘ê¸‰ì‹¤ ë‚´ì›', context: 'examination' },
                        { date: '2024-01-25', event: 'ì™¸ë˜ ì¶”ì ', context: 'follow_up' }
                    ]
                }
            };
        }

        function displayDNAResults(dnaResult) {
            let html = '';
            
            dnaResult.genes.forEach((gene, index) => {
                const anchorsHtml = Object.entries(gene.anchors || {})
                    .map(([type, value]) => {
                        if (!value) return '';
                        return `
                            <div class="anchor">
                                <span class="anchor-icon ${type}"></span>
                                <span>${type}: ${value}</span>
                            </div>
                        `;
                    }).join('');

                const layoutInfo = gene.layout ? `
                    <div style="margin-top: 10px; padding: 8px; background: #e3f2fd; border-radius: 5px;">
                        <small>
                            ğŸ“ Position: ${gene.layout.position} | 
                            ğŸ“„ Section: ${gene.layout.section} | 
                            â­ Importance: ${(gene.layout.visualImportance * 100).toFixed(0)}%
                        </small>
                    </div>
                ` : '';

                const temporalInfo = gene.temporalContext ? `
                    <div class="temporal-context">
                        <div class="temporal-detail"><strong>ì›ë³¸ í‘œí˜„:</strong> ${gene.temporalContext.originalExpression}</div>
                        <div class="temporal-detail"><strong>ì •ê·œí™” ë‚ ì§œ:</strong> ${gene.temporalContext.normalizedDate}</div>
                        <div class="temporal-detail"><strong>í•´ê²° ë°©ë²•:</strong> ${gene.temporalContext.resolutionMethod}</div>
                        <div class="temporal-detail"><strong>ì˜ë£Œ ë§¥ë½:</strong> ${gene.temporalContext.medicalContext}</div>
                        <div class="temporal-detail"><strong>ì„ìƒì  ì¤‘ìš”ë„:</strong> ${(gene.temporalContext.clinicalSignificance * 100).toFixed(0)}%</div>
                    </div>
                ` : '';

                const enhancementBadges = `
                    <div class="enhancement-badges">
                        ${gene.layoutEnhanced ? '<span class="enhancement-badge layout-enhanced">Layout</span>' : ''}
                        ${gene.dateEnhanced ? '<span class="enhancement-badge date-enhanced">Date</span>' : ''}
                    </div>
                `;

                html += `
                    <div class="gene-card">
                        <div class="gene-header">
                            <span class="gene-id">${gene.id}</span>
                            <span class="confidence-badge">${(gene.confidence * 100).toFixed(0)}%</span>
                        </div>
                        <div class="gene-content">${gene.content}</div>
                        <div class="anchors">${anchorsHtml}</div>
                        ${layoutInfo}
                        ${temporalInfo}
                        ${enhancementBadges}
                    </div>
                `;
            });
            
            dnaResults.innerHTML = html;
        }

        function displayLayoutResults(layoutResult) {
            const html = `
                <div class="layout-stats">
                    <div class="stat-item">
                        <div class="stat-value">${layoutResult.spatialGroups}</div>
                        <div class="stat-label">ê³µê°„ ê·¸ë£¹</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${layoutResult.structuredElements.tables}</div>
                        <div class="stat-label">í…Œì´ë¸”</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${layoutResult.structuredElements.lists}</div>
                        <div class="stat-label">ë¦¬ìŠ¤íŠ¸</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${(layoutResult.accuracy * 100).toFixed(0)}%</div>
                        <div class="stat-label">ì •í™•ë„</div>
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4>ğŸ“‹ ë¬¸ì„œ êµ¬ì¡° (${layoutResult.documentStructure.sections.length}ê°œ ì„¹ì…˜)</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        ${layoutResult.documentStructure.sections.map(section => 
                            `<li>${section.type} (${(section.confidence * 100).toFixed(0)}%)</li>`
                        ).join('')}
                    </ul>
                </div>
            `;
            
            layoutResults.innerHTML = html;
        }

        function displayDateResults(dateResult) {
            const timelineHtml = dateResult.timeline.map(item => `
                <div class="timeline-item">
                    <div class="timeline-date">${item.date}</div>
                    <div class="timeline-event">${item.event}</div>
                    <div class="timeline-confidence">${item.context}</div>
                </div>
            `).join('');

            const html = `
                <div class="layout-stats">
                    <div class="stat-item">
                        <div class="stat-value">${dateResult.totalDates}</div>
                        <div class="stat-label">ì´ ë‚ ì§œ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${dateResult.ambiguousResolved.resolved}</div>
                        <div class="stat-label">ëª¨í˜¸ì„± í•´ê²°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${dateResult.conflictsResolved.conflicts}</div>
                        <div class="stat-label">ì¶©ëŒ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">${(dateResult.confidenceScore * 100).toFixed(0)}%</div>
                        <div class="stat-label">ì‹ ë¢°ë„</div>
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4>ğŸ“… ì‹œê°„ ìˆœì„œ (${dateResult.timeline.length}ê°œ ì´ë²¤íŠ¸)</h4>
                    <div class="date-timeline">
                        ${timelineHtml}
                    </div>
                </div>
            `;
            
            dateResults.innerHTML = html;
        }
    </script>
</body>
</html> 