<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VNEXSUS ê³ ê¸‰ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-align: center;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 20px;
            border: 1px solid rgba(52, 152, 219, 0.3);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #27ae60;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-item {
            text-align: center;
            padding: 15px;
            background: rgba(52, 152, 219, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(52, 152, 219, 0.1);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #2980b9;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 15px;
        }

        .log-container {
            max-height: 300px;
            overflow-y: auto;
            background: #2c3e50;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 5px 8px;
            border-radius: 4px;
            border-left: 3px solid;
        }

        .log-info {
            background: rgba(52, 152, 219, 0.1);
            border-left-color: #3498db;
            color: #ecf0f1;
        }

        .log-warning {
            background: rgba(241, 196, 15, 0.1);
            border-left-color: #f1c40f;
            color: #f39c12;
        }

        .log-error {
            background: rgba(231, 76, 60, 0.1);
            border-left-color: #e74c3c;
            color: #e74c3c;
        }

        .log-success {
            background: rgba(46, 204, 113, 0.1);
            border-left-color: #2ecc71;
            color: #2ecc71;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: rgba(149, 165, 166, 0.2);
            color: #2c3e50;
            border: 1px solid rgba(149, 165, 166, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(149, 165, 166, 0.3);
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid;
        }

        .alert-warning {
            background: rgba(241, 196, 15, 0.1);
            border-left-color: #f1c40f;
            color: #f39c12;
        }

        .alert-error {
            background: rgba(231, 76, 60, 0.1);
            border-left-color: #e74c3c;
            color: #e74c3c;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(149, 165, 166, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(149, 165, 166, 0.2);
        }

        .table th {
            background: rgba(52, 152, 219, 0.1);
            font-weight: 600;
            color: #2c3e50;
        }

        .table tr:hover {
            background: rgba(52, 152, 219, 0.05);
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .status-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .controls {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- ì—°ê²° ìƒíƒœ í‘œì‹œ -->
    <div id="connectionStatus" class="connection-status connection-offline">ğŸ”´ ì—°ê²° í™•ì¸ ì¤‘...</div>

    <div class="dashboard-container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸš€ VNEXSUS ê³ ê¸‰ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</h1>
            <p>ì‹¤ì‹œê°„ í•˜ì´ë¸Œë¦¬ë“œ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ ë° ì„±ëŠ¥ ë¶„ì„</p>
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-indicator"></div>
                    <span>ì‹œìŠ¤í…œ ìƒíƒœ: <strong id="system-status">ì •ìƒ</strong></span>
                </div>
                <div class="status-item">
                    <span>í™œì„± ì„¸ì…˜: <strong id="active-sessions">0</strong></span>
                </div>
                <div class="status-item">
                    <span>ì²˜ë¦¬ ì¤‘ì¸ ì‘ì—…: <strong id="processing-tasks">0</strong></span>
                </div>
                <div class="status-item">
                    <span>ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <strong id="last-update">-</strong></span>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ë©”íŠ¸ë¦­ -->
        <div class="grid">
            <!-- ì„±ëŠ¥ ë©”íŠ¸ë¦­ -->
            <div class="card">
                <h3>
                    <div class="card-icon">ğŸ“Š</div>
                    ì„±ëŠ¥ ë©”íŠ¸ë¦­
                </h3>
                <div class="metric-grid">
                    <div class="metric-item">
                        <div class="metric-value" id="avg-processing-time">0ms</div>
                        <div class="metric-label">í‰ê·  ì²˜ë¦¬ì‹œê°„</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="throughput">0</div>
                        <div class="metric-label">ì²˜ë¦¬ëŸ‰/ë¶„</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="success-rate">0%</div>
                        <div class="metric-label">ì„±ê³µë¥ </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="error-rate">0%</div>
                        <div class="metric-label">ì˜¤ë¥˜ìœ¨</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="performance-chart"></canvas>
                </div>
            </div>

            <!-- ìºì‹œ ì„±ëŠ¥ -->
            <div class="card">
                <h3>
                    <div class="card-icon">ğŸ’¾</div>
                    ìºì‹œ ì„±ëŠ¥
                </h3>
                <div class="metric-grid">
                    <div class="metric-item">
                        <div class="metric-value" id="cache-hit-rate">0%</div>
                        <div class="metric-label">ìºì‹œ íˆíŠ¸ìœ¨</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="cache-size">0</div>
                        <div class="metric-label">ìºì‹œ í¬ê¸°</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="cache-chart"></canvas>
                </div>
            </div>

            <!-- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ -->
            <div class="card">
                <h3>
                    <div class="card-icon">ğŸ§ </div>
                    ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
                </h3>
                <div class="metric-grid">
                    <div class="metric-item">
                        <div class="metric-value" id="memory-usage">0%</div>
                        <div class="metric-label">ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value" id="heap-size">0MB</div>
                        <div class="metric-label">í™ í¬ê¸°</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="memory-progress" style="width: 0%"></div>
                </div>
                <div class="chart-container">
                    <canvas id="memory-chart"></canvas>
                </div>
            </div>

            <!-- ì—”ì§„ ë¹„êµ -->
            <div class="card">
                <h3>
                    <div class="card-icon">âš™ï¸</div>
                    ì—”ì§„ ì„±ëŠ¥ ë¹„êµ
                </h3>
                <div class="chart-container">
                    <canvas id="engine-comparison-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- í•˜ë‹¨ ì„¹ì…˜ -->
        <div class="grid">
            <!-- ì‹¤ì‹œê°„ ë¡œê·¸ -->
            <div class="card">
                <h3>
                    <div class="card-icon">ğŸ“</div>
                    ì‹¤ì‹œê°„ ë¡œê·¸
                </h3>
                <div class="controls">
                    <button class="btn btn-primary" onclick="clearLogs()">ë¡œê·¸ ì§€ìš°ê¸°</button>
                    <button class="btn btn-secondary" onclick="toggleAutoScroll()">ìë™ ìŠ¤í¬ë¡¤</button>
                    <button class="btn btn-secondary" onclick="exportLogs()">ë¡œê·¸ ë‚´ë³´ë‚´ê¸°</button>
                </div>
                <div class="log-container" id="log-container">
                    <!-- ë¡œê·¸ ì—”íŠ¸ë¦¬ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì•Œë¦¼ ë° ê²½ê³  -->
            <div class="card">
                <h3>
                    <div class="card-icon">ğŸš¨</div>
                    ì•Œë¦¼ ë° ê²½ê³ 
                </h3>
                <div id="alerts-container">
                    <!-- ì•Œë¦¼ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì²˜ë¦¬ í˜„í™© -->
            <div class="card">
                <h3>
                    <div class="card-icon">ğŸ“ˆ</div>
                    ì²˜ë¦¬ í˜„í™©
                </h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>ì—”ì§„</th>
                            <th>ì²˜ë¦¬ ê±´ìˆ˜</th>
                            <th>í‰ê·  ì‹œê°„</th>
                            <th>ì„±ê³µë¥ </th>
                        </tr>
                    </thead>
                    <tbody id="processing-status-table">
                        <!-- ì²˜ë¦¬ í˜„í™© ë°ì´í„°ê°€ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        class AdvancedDashboard {
            constructor() {
                this.charts = {};
                this.autoScroll = true;
                this.updateInterval = 5000; // 5ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
                this.maxLogEntries = 100;
                
                this.initializeCharts();
                this.startRealTimeUpdates();
                this.addSampleData();
            }

            initializeCharts() {
                // ì„±ëŠ¥ ì°¨íŠ¸
                const performanceCtx = document.getElementById('performance-chart').getContext('2d');
                this.charts.performance = new Chart(performanceCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'ì²˜ë¦¬ ì‹œê°„ (ms)',
                            data: [],
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                // ìºì‹œ ì°¨íŠ¸
                const cacheCtx = document.getElementById('cache-chart').getContext('2d');
                this.charts.cache = new Chart(cacheCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['L1 ìºì‹œ', 'L2 ìºì‹œ', 'L3 ìºì‹œ'],
                        datasets: [{
                            data: [0, 0, 0],
                            backgroundColor: ['#3498db', '#2ecc71', '#f39c12']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });

                // ë©”ëª¨ë¦¬ ì°¨íŠ¸
                const memoryCtx = document.getElementById('memory-chart').getContext('2d');
                this.charts.memory = new Chart(memoryCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  (%)',
                            data: [],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });

                // ì—”ì§„ ë¹„êµ ì°¨íŠ¸
                const engineCtx = document.getElementById('engine-comparison-chart').getContext('2d');
                this.charts.engineComparison = new Chart(engineCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Legacy', 'Hybrid', 'Core'],
                        datasets: [{
                            label: 'í‰ê·  ì²˜ë¦¬ ì‹œê°„ (ms)',
                            data: [0, 0, 0],
                            backgroundColor: ['#95a5a6', '#3498db', '#2ecc71']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }

            async fetchMetrics() {
                try {
                    // ëŒ€ì‹œë³´ë“œ API ì—”ë“œí¬ì¸íŠ¸ ë³€ê²½
                    const response = await fetch('http://localhost:3030/api/dashboard/metrics');
                    if (response.ok) {
                        const data = await response.json();
                        if (data.success) {
                            return data.data;
                        } else {
                            throw new Error(data.error || 'ë©”íŠ¸ë¦­ ì¡°íšŒ ì‹¤íŒ¨');
                        }
                    }
                } catch (error) {
                    console.error('ë©”íŠ¸ë¦­ ì¡°íšŒ ì‹¤íŒ¨:', error);
                    this.addLogEntry('error', `ë©”íŠ¸ë¦­ ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`);
                }
                return null;
            }

            async fetchSystemStatus() {
                try {
                    const response = await fetch('http://localhost:3030/api/dashboard/alerts');
                    if (response.ok) {
                        return await response.json();
                    }
                } catch (error) {
                    console.error('ì‹œìŠ¤í…œ ìƒíƒœ ì¡°íšŒ ì‹¤íŒ¨:', error);
                    this.addLogEntry('error', `ì‹œìŠ¤í…œ ìƒíƒœ ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`);
                }
                return null;
            }

            updateMetrics(metrics) {
                if (!metrics) return;

                // ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
                document.getElementById('avg-processing-time').textContent = 
                    `${Math.round(metrics.processing?.averageTime || 0)}ms`;
                document.getElementById('throughput').textContent = 
                    Math.round(metrics.processing?.throughput || 0);
                document.getElementById('success-rate').textContent = 
                    `${Math.round(metrics.processing?.successRate || 0)}%`;
                document.getElementById('error-rate').textContent = 
                    `${Math.round(metrics.processing?.errorRate || 0)}%`;

                // ìºì‹œ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
                const cacheStats = metrics.cache || {};
                const totalHits = (cacheStats.l1?.hits || 0) + (cacheStats.l2?.hits || 0) + (cacheStats.l3?.hits || 0);
                const totalRequests = totalHits + (cacheStats.l1?.misses || 0) + (cacheStats.l2?.misses || 0) + (cacheStats.l3?.misses || 0);
                const hitRate = totalRequests > 0 ? (totalHits / totalRequests * 100) : 0;
                
                document.getElementById('cache-hit-rate').textContent = `${Math.round(hitRate)}%`;
                document.getElementById('cache-size').textContent = 
                    (cacheStats.l1?.size || 0) + (cacheStats.l2?.size || 0) + (cacheStats.l3?.size || 0);

                // ë©”ëª¨ë¦¬ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
                const memoryStats = metrics.memory || {};
                const memoryUsage = Math.round((memoryStats.currentUsage || 0) * 100);
                document.getElementById('memory-usage').textContent = `${memoryUsage}%`;
                document.getElementById('heap-size').textContent = 
                    `${Math.round(memoryStats.heapUsed || 0)}MB`;
                document.getElementById('memory-progress').style.width = `${memoryUsage}%`;

                // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                this.updateCharts(metrics);
            }

            updateCharts(metrics) {
                const now = new Date().toLocaleTimeString();

                // ì„±ëŠ¥ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                const performanceChart = this.charts.performance;
                performanceChart.data.labels.push(now);
                performanceChart.data.datasets[0].data.push(metrics.processing?.averageTime || 0);
                
                if (performanceChart.data.labels.length > 20) {
                    performanceChart.data.labels.shift();
                    performanceChart.data.datasets[0].data.shift();
                }
                performanceChart.update('none');

                // ìºì‹œ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                const cacheChart = this.charts.cache;
                const cacheStats = metrics.cache || {};
                cacheChart.data.datasets[0].data = [
                    cacheStats.l1?.size || 0,
                    cacheStats.l2?.size || 0,
                    cacheStats.l3?.size || 0
                ];
                cacheChart.update('none');

                // ë©”ëª¨ë¦¬ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                const memoryChart = this.charts.memory;
                memoryChart.data.labels.push(now);
                memoryChart.data.datasets[0].data.push((metrics.memory?.currentUsage || 0) * 100);
                
                if (memoryChart.data.labels.length > 20) {
                    memoryChart.data.labels.shift();
                    memoryChart.data.datasets[0].data.shift();
                }
                memoryChart.update('none');

                // ì—”ì§„ ë¹„êµ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                const engineChart = this.charts.engineComparison;
                const engineStats = metrics.engines || {};
                engineChart.data.datasets[0].data = [
                    engineStats.legacy?.averageTime || 0,
                    engineStats.hybrid?.averageTime || 0,
                    engineStats.core?.averageTime || 0
                ];
                engineChart.update('none');
            }

            updateSystemStatus(status) {
                if (!status) return;

                document.getElementById('system-status').textContent = status.status || 'ì•Œ ìˆ˜ ì—†ìŒ';
                document.getElementById('active-sessions').textContent = status.activeSessions || 0;
                document.getElementById('processing-tasks').textContent = status.processingTasks || 0;
                document.getElementById('last-update').textContent = new Date().toLocaleTimeString();

                // ì²˜ë¦¬ í˜„í™© í…Œì´ë¸” ì—…ë°ì´íŠ¸
                this.updateProcessingStatusTable(status.engines || {});

                // ì•Œë¦¼ ì—…ë°ì´íŠ¸
                this.updateAlerts(status.alerts || []);
            }

            updateProcessingStatusTable(engines) {
                const tbody = document.getElementById('processing-status-table');
                tbody.innerHTML = '';

                Object.entries(engines).forEach(([engine, stats]) => {
                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td>${engine}</td>
                        <td>${stats.processedCount || 0}</td>
                        <td>${Math.round(stats.averageTime || 0)}ms</td>
                        <td>${Math.round(stats.successRate || 0)}%</td>
                    `;
                });
            }

            updateAlerts(alerts) {
                const container = document.getElementById('alerts-container');
                container.innerHTML = '';

                if (alerts.length === 0) {
                    container.innerHTML = '<p style="color: #7f8c8d; text-align: center;">í˜„ì¬ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }

                alerts.forEach(alert => {
                    const alertDiv = document.createElement('div');
                    alertDiv.className = `alert alert-${alert.type}`;
                    alertDiv.innerHTML = `
                        <strong>${alert.title}</strong><br>
                        ${alert.message}
                        <small style="float: right;">${new Date(alert.timestamp).toLocaleTimeString()}</small>
                    `;
                    container.appendChild(alertDiv);
                });
            }

            addLogEntry(type, message) {
                const container = document.getElementById('log-container');
                const entry = document.createElement('div');
                entry.className = `log-entry log-${type}`;
                entry.innerHTML = `
                    <span style="color: #bdc3c7;">[${new Date().toLocaleTimeString()}]</span> ${message}
                `;
                
                container.appendChild(entry);

                // ìµœëŒ€ ë¡œê·¸ ì—”íŠ¸ë¦¬ ìˆ˜ ì œí•œ
                while (container.children.length > this.maxLogEntries) {
                    container.removeChild(container.firstChild);
                }

                // ìë™ ìŠ¤í¬ë¡¤
                if (this.autoScroll) {
                    container.scrollTop = container.scrollHeight;
                }
            }

            async startRealTimeUpdates() {
                const updateData = async () => {
                    try {
                        const [metrics, status] = await Promise.all([
                            this.fetchMetrics(),
                            this.fetchSystemStatus()
                        ]);

                        if (metrics) {
                            this.updateMetrics(metrics);
                            this.addLogEntry('info', 'ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                        }

                        if (status) {
                            this.updateSystemStatus(status);
                        }
                    } catch (error) {
                        this.addLogEntry('error', `ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${error.message}`);
                    }
                };

                // ì´ˆê¸° ì—…ë°ì´íŠ¸
                await updateData();

                // ì •ê¸°ì  ì—…ë°ì´íŠ¸
                setInterval(updateData, this.updateInterval);
            }

            addSampleData() {
                // ìƒ˜í”Œ ë¡œê·¸ ì—”íŠ¸ë¦¬ ì¶”ê°€
                this.addLogEntry('info', 'ëŒ€ì‹œë³´ë“œê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                this.addLogEntry('success', 'í•˜ì´ë¸Œë¦¬ë“œ ì‹œìŠ¤í…œ ì—°ê²° ì„±ê³µ');
                this.addLogEntry('info', 'ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ì„ ì‹œì‘í•©ë‹ˆë‹¤.');
                
                // ìƒ˜í”Œ ë©”íŠ¸ë¦­ ë°ì´í„°
                const sampleMetrics = {
                    processing: {
                        averageTime: 1250,
                        throughput: 45,
                        successRate: 98.5,
                        errorRate: 1.5
                    },
                    cache: {
                        l1: { hits: 150, misses: 20, size: 85 },
                        l2: { hits: 80, misses: 15, size: 120 },
                        l3: { hits: 40, misses: 10, size: 200 }
                    },
                    memory: {
                        currentUsage: 0.65,
                        heapUsed: 245
                    },
                    engines: {
                        legacy: { averageTime: 800, processedCount: 120, successRate: 99.2 },
                        hybrid: { averageTime: 1200, processedCount: 85, successRate: 98.8 },
                        core: { averageTime: 1800, processedCount: 45, successRate: 97.5 }
                    }
                };

                const sampleStatus = {
                    status: 'ì •ìƒ',
                    activeSessions: 12,
                    processingTasks: 3,
                    engines: sampleMetrics.engines,
                    alerts: [
                        {
                            type: 'warning',
                            title: 'ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì£¼ì˜',
                            message: 'ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ 65%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.',
                            timestamp: new Date().toISOString()
                        }
                    ]
                };

                this.updateMetrics(sampleMetrics);
                this.updateSystemStatus(sampleStatus);
            }
        }

        // ì „ì—­ í•¨ìˆ˜ë“¤
        function clearLogs() {
            document.getElementById('log-container').innerHTML = '';
            dashboard.addLogEntry('info', 'ë¡œê·¸ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.');
        }

        function toggleAutoScroll() {
            dashboard.autoScroll = !dashboard.autoScroll;
            const btn = event.target;
            btn.textContent = dashboard.autoScroll ? 'ìë™ ìŠ¤í¬ë¡¤' : 'ìˆ˜ë™ ìŠ¤í¬ë¡¤';
            dashboard.addLogEntry('info', `ìë™ ìŠ¤í¬ë¡¤ì´ ${dashboard.autoScroll ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        function exportLogs() {
            const logs = Array.from(document.querySelectorAll('.log-entry'))
                .map(entry => entry.textContent)
                .join('\n');
            
            const blob = new Blob([logs], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `vnexsus-logs-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            dashboard.addLogEntry('success', 'ë¡œê·¸ê°€ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤.');
        }

        // ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
        let dashboard;
        document.addEventListener('DOMContentLoaded', () => {
            dashboard = new AdvancedDashboard();
        });
    </script>
</body>
</html>